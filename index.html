<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Evolution: –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä PRO Edition</title>
    <style>
        /* [–í–°–ï –°–¢–ò–õ–ò –ò–ó –û–ë–û–ò–• –í–ï–†–°–ò–ô –ë–£–î–£–¢ –û–ë–™–ï–î–ò–ù–ï–ù–´ –ó–î–ï–°–¨] */
        /* –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #ff8a00;
            --color-secondary: #e52e71;
            --color-success: #00b894;
            --color-danger: #ff4757;
            --color-warning: #ffa502;
            --color-info: #3742fa;
            --color-dark: #1a1a2e;
            --color-darker: #16213e;
            --color-darkest: #0f3460;
            --color-text: #ffffff;
            --color-text-secondary: #a9b7c6;
            --color-christmas-red: #e74c3c;
            --color-christmas-green: #2ecc71;
            --color-christmas-gold: #f1c40f;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            color: var(--color-text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* –°–ù–ï–ì–û–ü–ê–î */
        .snowflakes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        /* –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--color-darkest), var(--color-darker), var(--color-dark));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 1s;
        }

        .loading-dragon {
            font-size: 120px;
            margin-bottom: 30px;
            animation: dragonFloat 3s infinite ease-in-out;
            filter: drop-shadow(0 0 20px rgba(255, 100, 0, 0.7));
        }

        .loading-bar {
            width: 400px;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .loading-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--color-christmas-red), var(--color-christmas-green));
            width: 0%;
            transition: width 0.3s;
            box-shadow: 0 0 10px rgba(255, 138, 0, 0.7);
        }

        .loading-text {
            font-size: 20px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            color: var(--color-text-secondary);
        }

        /* –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ */
        .main-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, var(--color-dark) 0%, var(--color-darker) 50%, var(--color-darkest) 100%);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .game-title {
            font-size: 72px;
            background: linear-gradient(45deg, var(--color-christmas-red), var(--color-christmas-green), var(--color-christmas-gold));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(231, 76, 60, 0.5);
            font-family: 'Cinzel', serif;
            letter-spacing: 3px;
        }

        .game-subtitle {
            font-size: 20px;
            color: var(--color-text-secondary);
            margin-bottom: 50px;
            font-style: italic;
        }

        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 300px;
        }

        .menu-btn {
            padding: 18px 30px;
            font-size: 22px;
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.8), rgba(46, 204, 113, 0.8));
            border: none;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: bold;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .menu-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(231, 76, 60, 0.3);
            background: linear-gradient(45deg, rgba(231, 76, 60, 1), rgba(46, 204, 113, 1));
        }

        .credits {
            position: absolute;
            bottom: 30px;
            color: #666;
            font-size: 16px;
            text-align: center;
        }

        .creator {
            color: var(--color-christmas-red);
            font-weight: bold;
            font-size: 18px;
            margin-top: 5px;
        }

        /* –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ */
        .admin-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 9998;
        }

        .admin-btn {
            padding: 10px 20px;
            background: linear-gradient(45deg, var(--color-danger), #c0392b);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(255, 71, 87, 0.5);
        }

        .admin-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 30px;
            border-radius: 20px;
            border: 3px solid var(--color-danger);
            z-index: 10001;
            display: none;
            min-width: 500px;
            max-width: 800px;
        }

        .admin-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .admin-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--color-danger);
            border-radius: 5px;
            color: white;
        }

        .admin-resource {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }

        /* –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° */
        .game-container {
            display: none;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(25, 25, 35, 0.95);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 20px;
            border: 2px solid var(--color-christmas-red);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .player-info {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .resource {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .resource-icon {
            font-size: 20px;
        }

        .resource-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--color-christmas-gold);
            min-width: 60px;
            text-align: right;
        }

        .dragon-name {
            font-size: 24px;
            color: var(--color-christmas-red);
            font-weight: bold;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            gap: 20px;
            min-height: 700px;
        }

        /* –ü–ê–ù–ï–õ–¨ –ü–†–û–§–ò–õ–Ø */
        .profile-panel {
            background: rgba(25, 25, 35, 0.95);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--color-christmas-green);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--color-christmas-red), var(--color-christmas-green));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border: 3px solid var(--color-christmas-gold);
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 24px;
            font-weight: bold;
            color: var(--color-christmas-red);
        }

        .profile-rank {
            display: inline-block;
            padding: 5px 15px;
            background: linear-gradient(45deg, var(--color-christmas-gold), #d35400);
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 5px;
        }

        /* –¢–û–ü –ò–ì–†–û–ö–û–í */
        .leaderboard-panel {
            background: rgba(25, 25, 35, 0.95);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--color-christmas-gold);
            margin-top: 20px;
        }

        .leaderboard-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border-left: 4px solid;
        }

        .leaderboard-rank {
            width: 30px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            margin-right: 15px;
        }

        .rank-1 { color: #ffd700; border-left-color: #ffd700; }
        .rank-2 { color: #c0c0c0; border-left-color: #c0c0c0; }
        .rank-3 { color: #cd7f32; border-left-color: #cd7f32; }

        /* –ù–û–í–û–ì–û–î–ù–ò–ô –ò–í–ï–ù–¢ */
        .event-panel {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.1), rgba(46, 204, 113, 0.1));
            border: 3px dashed var(--color-christmas-green);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .event-title {
            color: var(--color-christmas-red);
            font-size: 24px;
            margin-bottom: 15px;
            text-align: center;
        }

        .event-timer {
            font-size: 18px;
            color: var(--color-christmas-gold);
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .event-tasks {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .event-task {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--color-christmas-green);
        }

        .event-reward {
            display: inline-block;
            padding: 5px 10px;
            background: linear-gradient(45deg, var(--color-christmas-gold), #d35400);
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }

        /* –ú–£–õ–¨–¢–ò–ü–õ–ï–ï–† */
        .multiplayer-panel {
            background: rgba(25, 25, 35, 0.95);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--color-info);
            margin-top: 20px;
        }

        .online-players {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .online-player {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .online-player:hover {
            border-color: var(--color-info);
            transform: translateY(-3px);
        }

        .player-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-online { background: var(--color-success); }
        .status-offline { background: var(--color-danger); }
        .status-away { background: var(--color-warning); }

        /* PvP –†–ê–ù–ì–ò */
        .pvp-ranks {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .pvp-rank {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid;
        }

        .rank-bronze { border-color: #cd7f32; }
        .rank-silver { border-color: #c0c0c0; }
        .rank-gold { border-color: #ffd700; }
        .rank-platinum { border-color: #3498db; }
        .rank-diamond { border-color: #1abc9c; }
        .rank-master { border-color: #9b59b6; }
        .rank-grandmaster { border-color: #e74c3c; }

        /* –û–°–¢–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò */
        .panel {
            background: rgba(25, 25, 35, 0.95);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid rgba(255, 138, 0, 0.3);
        }

        .dragon-panel {
            grid-column: 1;
        }

        .action-panel {
            grid-column: 2;
        }

        .inventory-panel {
            grid-column: 3;
        }

        .section-title {
            font-size: 22px;
            color: var(--color-primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 138, 0, 0.3);
        }

        /* –ü–ê–ù–ï–õ–¨ –î–†–ê–ö–û–ù–ê */
        .dragon-display {
            width: 250px;
            height: 250px;
            margin: 0 auto 30px;
            position: relative;
            background: radial-gradient(circle at center, rgba(255, 138, 0, 0.1), transparent 70%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .dragon-icon {
            font-size: 140px;
            animation: pulse 2s infinite;
        }

        .dragon-level {
            position: absolute;
            top: -10px;
            right: -10px;
            background: linear-gradient(45deg, var(--color-primary), var(--color-secondary));
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border: 3px solid gold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-name {
            color: var(--color-text-secondary);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4dffea;
        }

        /* –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 20px;
            font-size: 16px;
            background: linear-gradient(45deg, rgba(40, 40, 60, 0.9), rgba(30, 30, 50, 0.9));
            border: 2px solid rgba(255, 138, 0, 0.5);
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            border-color: var(--color-primary);
            box-shadow: 0 5px 15px rgba(255, 138, 0, 0.3);
            background: linear-gradient(45deg, rgba(255, 138, 0, 0.2), rgba(229, 46, 113, 0.2));
        }

        .btn-icon {
            font-size: 28px;
        }

        /* –õ–û–ì */
        .battle-log {
            height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid rgba(255, 138, 0, 0.2);
        }

        .log-entry {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid;
            animation: slideIn 0.3s ease-out;
            font-size: 14px;
        }

        .log-loot { border-left-color: #ffd700; background: rgba(255, 215, 0, 0.1); }
        .log-damage { border-left-color: var(--color-danger); background: rgba(255, 71, 87, 0.1); }
        .log-heal { border-left-color: var(--color-success); background: rgba(46, 213, 115, 0.1); }
        .log-info { border-left-color: var(--color-info); background: rgba(55, 66, 250, 0.1); }
        .log-quest { border-left-color: var(--color-warning); background: rgba(255, 165, 2, 0.1); }

        /* –ò–ù–í–ï–ù–¢–ê–†–¨ */
        .inventory-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .inventory-tab {
            flex: 1;
            padding: 12px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .inventory-tab.active {
            background: linear-gradient(45deg, rgba(0, 184, 148, 0.8), rgba(9, 132, 227, 0.8));
        }

        .inventory-content {
            height: 500px;
            overflow-y: auto;
        }

        .item-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .item-slot {
            aspect-ratio: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            padding: 10px;
            position: relative;
        }

        .item-slot:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px currentColor;
        }

        .item-rarity-common { border-color: #a9b7c6; color: #a9b7c6; }
        .item-rarity-uncommon { border-color: #2ed573; color: #2ed573; }
        .item-rarity-rare { border-color: #3742fa; color: #3742fa; }
        .item-rarity-epic { border-color: #9b59b6; color: #9b59b6; }
        .item-rarity-legendary { border-color: #f1c40f; color: #f1c40f; border-width: 3px; }
        .item-rarity-mythical { border-color: #e74c3c; color: #e74c3c; border-width: 3px; border-style: dashed; }

        .item-icon {
            font-size: 32px;
            margin-bottom: 5px;
        }

        .item-name {
            font-size: 12px;
            text-align: center;
            color: inherit;
        }

        .item-count {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 12px;
        }

        /* –ë–û–ï–í–ê–Ø –°–ò–°–¢–ï–ú–ê */
        .battle-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--color-darkest), var(--color-darker));
            z-index: 2000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .battle-hud {
            display: flex;
            justify-content: space-between;
            width: 90%;
            max-width: 1200px;
            margin-bottom: 30px;
        }

        .combatant {
            background: rgba(0, 0, 0, 0.7);
            padding: 25px;
            border-radius: 20px;
            width: 350px;
            text-align: center;
            border: 3px solid;
        }

        .player-hud { border-color: var(--color-success); }
        .enemy-hud { border-color: var(--color-danger); }

        .health-bar-container {
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
        }

        .health-bar {
            height: 100%;
            border-radius: 15px;
            transition: width 0.5s;
        }

        .player-health { background: linear-gradient(90deg, var(--color-success), #00cec9); }
        .enemy-health { background: linear-gradient(90deg, var(--color-danger), #ff6b81); }

        .battle-actions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            width: 90%;
            max-width: 1200px;
        }

        .battle-action {
            padding: 15px;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid var(--color-info);
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .battle-action:hover:not(:disabled) {
            background: rgba(55, 66, 250, 0.3);
            transform: translateY(-5px);
        }

        .battle-action:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .battle-log-container {
            width: 90%;
            max-width: 1200px;
            height: 150px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
            overflow-y: auto;
            border: 2px solid var(--color-warning);
        }

        /* –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        .modal {
            background: linear-gradient(45deg, var(--color-dark), var(--color-darker));
            border-radius: 25px;
            padding: 30px;
            min-width: 500px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            border: 3px solid rgba(255, 138, 0, 0.5);
            box-shadow: 0 0 50px rgba(255, 138, 0, 0.3);
            animation: modalAppear 0.3s ease-out;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 138, 0, 0.3);
        }

        .modal-title {
            font-size: 28px;
            color: var(--color-primary);
            font-weight: bold;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: var(--color-danger);
        }

        /* –°–£–ù–î–£–ö–ò */
        .chest-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .chest {
            background: linear-gradient(45deg, rgba(30, 30, 46, 0.9), rgba(20, 20, 36, 0.9));
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid;
            position: relative;
            overflow: hidden;
        }

        .chest:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .chest-common { border-color: #a9b7c6; }
        .chest-uncommon { border-color: #2ed573; }
        .chest-rare { border-color: #3742fa; }
        .chest-epic { border-color: #9b59b6; }
        .chest-legendary { border-color: #f1c40f; }
        .chest-mythical { border-color: #e74c3c; }

        .chest-icon {
            font-size: 60px;
            margin-bottom: 15px;
        }

        .chest-cost {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            font-weight: bold;
        }

        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        @keyframes dragonFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes christmasLights {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .christmas-light {
            animation: christmasLights 1s infinite;
        }

        /* –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, var(--color-success), #1dd1a1);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 9999;
            animation: slideIn 0.3s ease-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 300px;
            display: none;
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #ffd700, var(--color-primary));
            padding: 30px;
            border-radius: 20px;
            z-index: 9999;
            text-align: center;
            animation: modalAppear 0.5s ease-out;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
            display: none;
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
            }
            
            .dragon-panel {
                grid-column: 1;
                grid-row: 1;
            }
            
            .action-panel {
                grid-column: 1;
                grid-row: 2;
            }
            
            .inventory-panel {
                grid-column: 1;
                grid-row: 3;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
            }
            
            .player-info {
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .action-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .item-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .chest-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .battle-actions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .modal {
                min-width: 90%;
                padding: 20px;
            }
            
            .pvp-ranks {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .online-players {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .item-grid {
                grid-template-columns: 1fr;
            }
            
            .chest-grid {
                grid-template-columns: 1fr;
            }
            
            .battle-hud {
                flex-direction: column;
                gap: 20px;
                align-items: center;
            }
            
            .combatant {
                width: 100%;
                max-width: 300px;
            }
            
            .pvp-ranks {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –°–ù–ï–ì–û–ü–ê–î -->
    <div class="snowflakes" id="snowflakes"></div>

    <!-- –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-dragon">üéÑüêâ</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
        <div class="loading-text" id="loadingText">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–≥–æ —á—É–¥–∞...</div>
    </div>

    <!-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
    <div class="main-menu" id="mainMenu">
        <div class="game-title">DRAGON EVOLUTION</div>
        <div class="game-subtitle">PRO Edition —Å –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–æ–º –∏ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–º –∏–≤–µ–Ω—Ç–æ–º</div>
        <div class="menu-buttons">
            <button class="menu-btn" onclick="startGame()">
                <i class="fas fa-play"></i> –ù–æ–≤–∞—è –∏–≥—Ä–∞
            </button>
            <button class="menu-btn" onclick="loadGame()">
                <i class="fas fa-folder-open"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É
            </button>
            <button class="menu-btn" onclick="connectMultiplayer()">
                <i class="fas fa-users"></i> –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä
            </button>
            <button class="menu-btn" onclick="showSettings()">
                <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </button>
            <button class="menu-btn" onclick="showLeaderboard()">
                <i class="fas fa-trophy"></i> –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤
            </button>
        </div>
        <div class="credits">
            –í–µ—Ä—Å–∏—è 5.0 | Ultimate Fusion Edition<br>
            <div class="creator">–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: AGAFONOV</div>
            –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 2024
        </div>
    </div>

    <!-- –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ -->
    <div class="admin-panel">
        <button class="admin-btn" onclick="showAdminPanel()">
            <i class="fas fa-crown"></i> –ü–∞–Ω–µ–ª—å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è
        </button>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
    <div class="game-container" id="gameContainer">
        <div class="header">
            <div class="dragon-name" id="dragonName">–î—Ä–∞–∫–æ–Ω –ê–≥–∞—Ñ–æ–Ω–æ–≤–∞</div>
            <div class="player-info">
                <div class="resource">
                    <div class="resource-icon">üí∞</div>
                    <div class="resource-value" id="gold">1000</div>
                </div>
                <div class="resource">
                    <div class="resource-icon">‚ú®</div>
                    <div class="resource-value" id="essence">500</div>
                </div>
                <div class="resource">
                    <div class="resource-icon">üîÆ</div>
                    <div class="resource-value" id="crystals">50</div>
                </div>
                <div class="resource">
                    <div class="resource-icon">‚ö°</div>
                    <div class="resource-value" id="energy">100/100</div>
                </div>
                <div class="resource">
                    <div class="resource-icon">‚≠ê</div>
                    <div class="resource-value" id="xp">0/100</div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨: –ü–†–û–§–ò–õ–¨ –ò –°–û–¶–ò–ê–õ–¨–ù–û–ï -->
            <div class="profile-panel">
                <div class="profile-header">
                    <div class="profile-avatar" id="playerAvatar">üêâ</div>
                    <div class="profile-info">
                        <div class="profile-name" id="playerName">–î—Ä–∞–∫–æ–Ω –ê–≥–∞—Ñ–æ–Ω–æ–≤–∞</div>
                        <div class="profile-rank" id="playerRank">–ù–æ–≤–∏—á–æ–∫</div>
                        <div style="font-size: 14px; color: var(--color-text-secondary); margin-top: 5px;">
                            –£—Ä–æ–≤–µ–Ω—å: <span id="playerLevel">1</span>
                        </div>
                    </div>
                </div>

                <!-- –ù–û–í–û–ì–û–î–ù–ò–ô –ò–í–ï–ù–¢ -->
                <div class="event-panel">
                    <div class="event-title">üéÑ –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ</div>
                    <div class="event-timer" id="eventTimer">–î–æ –∫–æ–Ω—Ü–∞: 10:00:00</div>
                    <div class="event-tasks" id="eventTasks">
                        <!-- –ó–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <!-- –û–ù–õ–ê–ô–ù –ò–ì–†–û–ö–ò -->
                <div class="multiplayer-panel">
                    <div class="section-title">
                        <i class="fas fa-users"></i> –û–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–∏
                        <span style="float: right; font-size: 14px; color: var(--color-success);" id="onlineCount">0</span>
                    </div>
                    <div class="online-players" id="onlinePlayers">
                        <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    <button onclick="refreshOnlinePlayers()" style="width: 100%; margin-top: 15px; padding: 10px; background: var(--color-info); border: none; border-radius: 10px; color: white; cursor: pointer;">
                        <i class="fas fa-sync-alt"></i> –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
                    </button>
                </div>
            </div>

            <!-- –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –ü–ê–ù–ï–õ–¨ -->
            <div class="panel action-panel">
                <div class="section-title">–î–µ–π—Å—Ç–≤–∏—è</div>
                <div class="action-buttons">
                    <button class="action-btn" onclick="startHunt()" id="huntBtn">
                        <div class="btn-icon">üéØ</div>
                        <div>–ù–æ–≤–æ–≥–æ–¥–Ω—è—è –æ—Ö–æ—Ç–∞</div>
                        <small>(10 —ç–Ω–µ—Ä–≥–∏–∏)</small>
                    </button>
                    <button class="action-btn" onclick="showChests()">
                        <div class="btn-icon">üéÅ</div>
                        <div>–ü–æ–¥–∞—Ä–∫–∏ –î–µ–¥–∞ –ú–æ—Ä–æ–∑–∞</div>
                    </button>
                    <button class="action-btn" onclick="showMultiplayerBattle()">
                        <div class="btn-icon">‚öîÔ∏è</div>
                        <div>PvP –ë–∏—Ç–≤–∞</div>
                    </button>
                    <button class="action-btn" onclick="showArena()">
                        <div class="btn-icon">üèÜ</div>
                        <div>–ê—Ä–µ–Ω–∞</div>
                    </button>
                    <button class="action-btn" onclick="showGuild()">
                        <div class="btn-icon">üè∞</div>
                        <div>–ì–∏–ª—å–¥–∏—è</div>
                    </button>
                    <button class="action-btn" onclick="showTrading()">
                        <div class="btn-icon">üîÑ</div>
                        <div>–¢–æ—Ä–≥–æ–≤–ª—è</div>
                    </button>
                    <button class="action-btn" onclick="showDungeon()">
                        <div class="btn-icon">‚ùÑÔ∏è</div>
                        <div>–õ–µ–¥—è–Ω–æ–µ –ø–æ–¥–∑–µ–º–µ–ª—å–µ</div>
                    </button>
                    <button class="action-btn" onclick="showDailyQuest()">
                        <div class="btn-icon">üìÖ</div>
                        <div>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</div>
                    </button>
                    <button class="action-btn" onclick="showAchievements()">
                        <div class="btn-icon">üèÖ</div>
                        <div>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
                    </button>
                    <button class="action-btn" onclick="showCollection()">
                        <div class="btn-icon">üìö</div>
                        <div>–ö–æ–ª–ª–µ–∫—Ü–∏—è</div>
                    </button>
                </div>

                <!-- –ü–ê–ù–ï–õ–¨ –î–†–ê–ö–û–ù–ê -->
                <div class="dragon-display" style="margin-top: 30px;">
                    <div class="dragon-icon" id="dragonIcon">üêâ</div>
                    <div class="dragon-level" id="dragonLevel">1</div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-name">–ê—Ç–∞–∫–∞</div>
                        <div class="stat-value" id="statAttack">150</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name">–ó–∞—â–∏—Ç–∞</div>
                        <div class="stat-value" id="statDefense">75</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name">–ó–¥–æ—Ä–æ–≤—å–µ</div>
                        <div class="stat-value" id="statHealth">1000/1000</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name">–°–∫–æ—Ä–æ—Å—Ç—å</div>
                        <div class="stat-value" id="statSpeed">120</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name">–ö—Ä–∏—Ç. —É–¥–∞—Ä</div>
                        <div class="stat-value" id="statCrit">15%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name">–£–∫–ª–æ–Ω–µ–Ω–∏–µ</div>
                        <div class="stat-value" id="statDodge">10%</div>
                    </div>
                </div>

                <!-- PvP –†–ê–ù–ì–ò -->
                <div style="margin-top: 30px;">
                    <div class="section-title">PvP –†–∞–Ω–≥–∏</div>
                    <div class="pvp-ranks">
                        <div class="pvp-rank rank-bronze">
                            <div style="font-size: 24px;">ü•â</div>
                            <div style="font-weight: bold;">–ë—Ä–æ–Ω–∑–∞</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">0-999 —Ä–µ–π—Ç–∏–Ω–≥–∞</div>
                        </div>
                        <div class="pvp-rank rank-silver">
                            <div style="font-size: 24px;">ü•à</div>
                            <div style="font-weight: bold;">–°–µ—Ä–µ–±—Ä–æ</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">1000-1999</div>
                        </div>
                        <div class="pvp-rank rank-gold">
                            <div style="font-size: 24px;">ü•á</div>
                            <div style="font-weight: bold;">–ó–æ–ª–æ—Ç–æ</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">2000-2999</div>
                        </div>
                        <div class="pvp-rank rank-platinum">
                            <div style="font-size: 24px;">üíé</div>
                            <div style="font-weight: bold;">–ü–ª–∞—Ç–∏–Ω–∞</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">3000-3999</div>
                        </div>
                        <div class="pvp-rank rank-diamond">
                            <div style="font-size: 24px;">üí†</div>
                            <div style="font-weight: bold;">–ê–ª–º–∞–∑</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">4000-4999</div>
                        </div>
                        <div class="pvp-rank rank-master">
                            <div style="font-size: 24px;">üëë</div>
                            <div style="font-weight: bold;">–ú–∞—Å—Ç–µ—Ä</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">5000+</div>
                        </div>
                    </div>
                </div>

                <div class="battle-log" id="battleLog">
                    <div class="log-entry log-info">–° –ù–æ–≤—ã–º –≥–æ–¥–æ–º! üéÑ</div>
                    <div class="log-entry log-info">–ò—Å–ø—ã—Ç–∞–π—Ç–µ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞!</div>
                </div>
            </div>

            <!-- –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨: –ò–ù–í–ï–ù–¢–ê–†–¨ –ò –¢–û–ü -->
            <div class="panel inventory-panel">
                <div class="section-title">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
                <div class="inventory-tabs">
                    <button class="inventory-tab active" onclick="switchInventoryTab('armor')">–î–æ—Å–ø–µ—Ö–∏</button>
                    <button class="inventory-tab" onclick="switchInventoryTab('weapons')">–û—Ä—É–∂–∏–µ</button>
                    <button class="inventory-tab" onclick="switchInventoryTab('special')">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ</button>
                    <button class="inventory-tab" onclick="switchInventoryTab('potions')">–ó–µ–ª—å—è</button>
                    <button class="inventory-tab" onclick="switchInventoryTab('materials')">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</button>
                </div>
                <div class="inventory-content" id="inventoryContent">
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>

                <!-- –¢–û–ü –ò–ì–†–û–ö–û–í -->
                <div class="leaderboard-panel">
                    <div class="section-title">üèÜ –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</div>
                    <div class="leaderboard-list" id="leaderboard">
                        <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ë–û–ï–í–ê–Ø –°–ò–°–¢–ï–ú–ê -->
    <div class="battle-container" id="battleContainer">
        <div class="battle-hud">
            <div class="combatant player-hud">
                <div class="combatant-name" id="battlePlayerName">–í–∞—à –î—Ä–∞–∫–æ–Ω</div>
                <div class="health-bar-container">
                    <div class="health-bar player-health" id="playerHealthBar" style="width: 100%"></div>
                </div>
                <div class="combatant-stats" id="playerBattleStats"></div>
            </div>
            <div class="combatant enemy-hud">
                <div class="combatant-name" id="battleEnemyName">–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫</div>
                <div class="health-bar-container">
                    <div class="health-bar enemy-health" id="enemyHealthBar" style="width: 100%"></div>
                </div>
                <div class="combatant-stats" id="enemyBattleStats"></div>
            </div>
        </div>
        
        <div class="battle-log-container" id="battleLogContainer"></div>
        
        <div class="battle-actions" id="battleActions">
            <!-- –ë–æ–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>

    <!-- –ê–î–ú–ò–ù –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û -->
    <div class="admin-modal" id="adminModal">
        <div style="color: var(--color-danger); font-size: 24px; margin-bottom: 20px; text-align: center;">
            <i class="fas fa-crown"></i> –ü–∞–Ω–µ–ª—å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è
        </div>
        
        <div class="admin-section">
            <div style="margin-bottom: 10px;">–ü–∞—Ä–æ–ª—å:</div>
            <input type="password" id="adminPassword" class="admin-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" onkeypress="checkAdminPassword(event)">
            <div id="adminError" style="color: var(--color-danger); margin-top: 10px; display: none;">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!</div>
        </div>

        <div id="adminContent" style="display: none;">
            <div class="admin-section">
                <div style="color: var(--color-christmas-gold); margin-bottom: 15px;">–†–µ—Å—É—Ä—Å—ã</div>
                <div class="admin-resource">
                    <span>–ó–æ–ª–æ—Ç–æ:</span>
                    <input type="number" id="adminGold" class="admin-input" value="1000" style="width: 100px;">
                </div>
                <div class="admin-resource">
                    <span>–≠—Å—Å–µ–Ω—Ü–∏—è:</span>
                    <input type="number" id="adminEssence" class="admin-input" value="500" style="width: 100px;">
                </div>
                <div class="admin-resource">
                    <span>–ö—Ä–∏—Å—Ç–∞–ª–ª—ã:</span>
                    <input type="number" id="adminCrystals" class="admin-input" value="50" style="width: 100px;">
                </div>
            </div>

            <div class="admin-section">
                <div style="color: var(--color-christmas-gold); margin-bottom: 15px;">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</div>
                <div class="admin-resource">
                    <span>–£—Ä–æ–≤–µ–Ω—å:</span>
                    <input type="number" id="adminLevel" class="admin-input" value="1" style="width: 100px;">
                </div>
                <div class="admin-resource">
                    <span>–ê—Ç–∞–∫–∞:</span>
                    <input type="number" id="adminAttack" class="admin-input" value="150" style="width: 100px;">
                </div>
                <div class="admin-resource">
                    <span>–ó–∞—â–∏—Ç–∞:</span>
                    <input type="number" id="adminDefense" class="admin-input" value="75" style="width: 100px;">
                </div>
            </div>

            <div class="admin-section">
                <div style="color: var(--color-christmas-gold); margin-bottom: 15px;">–ü—Ä–µ–¥–º–µ—Ç—ã</div>
                <select id="adminItems" class="admin-input" style="margin-bottom: 10px;">
                    <!-- –ü—Ä–µ–¥–º–µ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </select>
                <button onclick="adminAddItem()" style="width: 100%; padding: 10px; background: var(--color-success); border: none; border-radius: 5px; color: white; cursor: pointer;">
                    –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç
                </button>
            </div>

            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button onclick="adminApply()" style="flex: 1; padding: 15px; background: var(--color-success); border: none; border-radius: 10px; color: white; cursor: pointer; font-weight: bold;">
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                </button>
                <button onclick="adminReset()" style="flex: 1; padding: 15px; background: var(--color-warning); border: none; border-radius: 10px; color: white; cursor: pointer; font-weight: bold;">
                    –°–±—Ä–æ—Å–∏—Ç—å
                </button>
                <button onclick="adminClose()" style="flex: 1; padding: 15px; background: var(--color-danger); border: none; border-radius: 10px; color: white; cursor: pointer; font-weight: bold;">
                    –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê -->
    <div class="modal-overlay" id="modalOverlay">
        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
    </div>

    <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div class="notification" id="notification"></div>
    <div class="achievement-popup" id="achievementPopup"></div>

    <script>
        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –ö–û–ù–°–¢–ê–ù–¢–´ ====================
        const ADMIN_PASSWORD = "28122010";
        const GAME_VERSION = "5.0";
        
        // –°–∏–º—É–ª—è—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–∞
        let mockServer = {
            onlinePlayers: [],
            leaderboard: [],
            pvpMatches: [],
            trades: [],
            guilds: [],
            chatMessages: [],
            lastUpdate: Date.now()
        };

        // –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã (–∏–∑ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏)
        const CHRISTMAS_ITEMS = [
            { id: "santa_hat", name: "–®–∞–ø–∫–∞ –°–∞–Ω—Ç—ã", rarity: "epic", icon: "üéÖ", stats: { defense: 50, health: 200 }, price: 1000 },
            { id: "christmas_star", name: "–†–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∞—è –∑–≤–µ–∑–¥–∞", rarity: "legendary", icon: "‚≠ê", stats: { allStats: 15 }, price: 5000 },
            { id: "snowflake", name: "–°–Ω–µ–∂–∏–Ω–∫–∞ —É–¥–∞—á–∏", rarity: "rare", icon: "‚ùÑÔ∏è", stats: { dodge: 20, speed: 30 }, price: 1500 },
            { id: "gift_box", name: "–ü–æ–¥–∞—Ä–æ—á–Ω–∞—è –∫–æ—Ä–æ–±–∫–∞", rarity: "uncommon", icon: "üéÅ", stats: { gold: 500 }, price: 500 },
            { id: "candy_cane", name: "–ö–∞—Ä–∞–º–µ–ª—å–Ω–∞—è —Ç—Ä–æ—Å—Ç—å", rarity: "rare", icon: "üç¨", stats: { health: 300 }, price: 800 },
            { id: "reindeer", name: "–û–ª–µ–Ω—å-–µ–¥–∏–Ω–æ—Ä–æ–≥", rarity: "mythical", icon: "ü¶å", stats: { speed: 100, allDamage: 25 }, price: 10000 },
            { id: "christmas_tree", name: "–ñ–∏–≤–∞—è —ë–ª–∫–∞", rarity: "legendary", icon: "üéÑ", stats: { health: 1000, healthRegen: 50 }, price: 8000 },
            { id: "firework", name: "–§–µ–π–µ—Ä–≤–µ—Ä–∫", rarity: "epic", icon: "üéÜ", stats: { attack: 80, fireDamage: 40 }, price: 3000 }
        ];

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–∏–∑ –≤—Ç–æ—Ä–æ–π –≤–µ—Ä—Å–∏–∏)
        const ITEM_DATABASE = {
            head: [
                { id: "helmet_beginner", name: "–®–ª–µ–º –Ω–æ–≤–∏—á–∫–∞", rarity: "common", icon: "üëë", level: 1,
                  stats: { defense: 10, health: 50 }, price: 100, description: "–ë–∞–∑–æ–≤—ã–π —à–ª–µ–º –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –¥—Ä–∞–∫–æ–Ω–æ–≤" },
                { id: "helmet_hunter", name: "–ö–∞–ø—é—à–æ–Ω –æ—Ö–æ—Ç–Ω–∏–∫–∞", rarity: "uncommon", icon: "üé©", level: 3,
                  stats: { defense: 20, health: 100, dodge: 5 }, price: 250, description: "–®–ª–µ–º –æ–ø—ã—Ç–Ω–æ–≥–æ –æ—Ö–æ—Ç–Ω–∏–∫–∞" }
            ],
            chest: [
                { id: "chest_beginner", name: "–ö–∏—Ä–∞—Å–∞ —É—á–µ–Ω–∏–∫–∞", rarity: "common", icon: "üëï", level: 1,
                  stats: { defense: 20, health: 100 }, price: 150, description: "–ë–∞–∑–æ–≤–∞—è –∫–∏—Ä–∞—Å–∞ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫" }
            ],
            weapons: [
                { id: "weapon_beginner", name: "–ö–æ–≥—Ç–∏ –Ω–æ–≤–∏—á–∫–∞", rarity: "common", icon: "‚úã", level: 1,
                  stats: { attack: 20, speed: 10 }, price: 200, description: "–ë–∞–∑–æ–≤—ã–µ –∫–æ–≥—Ç–∏ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫" },
                { id: "weapon_fire", name: "–ü–ª–∞–º–µ–Ω–Ω—ã–µ –∫–æ–≥—Ç–∏", rarity: "rare", icon: "üî•", level: 5,
                  stats: { attack: 80, fireDamage: 30, speed: 15 }, price: 900, description: "–ö–æ–≥—Ç–∏ –ø—ã–ª–∞—é—â–∏–µ –≤–µ—á–Ω—ã–º –æ–≥–Ω–µ–º" }
            ],
            potions: [
                { id: "potion_health_small", name: "–ú–∞–ª–æ–µ –∑–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è", rarity: "common", icon: "‚ù§Ô∏è", 
                  effect: { health: 200 }, price: 50, stackable: true, description: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 200 –∑–¥–æ—Ä–æ–≤—å—è" },
                { id: "potion_energy", name: "–ó–µ–ª—å–µ —ç–Ω–µ—Ä–≥–∏–∏", rarity: "common", icon: "‚ö°", 
                  effect: { energy: 20 }, price: 30, stackable: true, description: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç 20 —ç–Ω–µ—Ä–≥–∏–∏" }
            ],
            materials: [
                { id: "mat_dragon_scale", name: "–î—Ä–∞–∫–æ–Ω—å—è —á–µ—à—É—è", rarity: "common", icon: "üî∏", 
                  price: 10, description: "–ü—Ä–æ—á–Ω–∞—è —á–µ—à—É—è –¥—Ä–∞–∫–æ–Ω–∞" }
            ],
            special: CHRISTMAS_ITEMS  // –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∫–∞–∫ –æ—Å–æ–±—ã–µ
        };

        // PvP —Ä–∞–Ω–≥–∏
        const PVP_RANKS = [
            { name: "–ù–æ–≤–∏—á–æ–∫", minRating: 0, maxRating: 999, icon: "ü•ö", color: "#a9b7c6" },
            { name: "–ë—Ä–æ–Ω–∑–∞", minRating: 1000, maxRating: 1999, icon: "ü•â", color: "#cd7f32" },
            { name: "–°–µ—Ä–µ–±—Ä–æ", minRating: 2000, maxRating: 2999, icon: "ü•à", color: "#c0c0c0" },
            { name: "–ó–æ–ª–æ—Ç–æ", minRating: 3000, maxRating: 3999, icon: "ü•á", color: "#ffd700" },
            { name: "–ü–ª–∞—Ç–∏–Ω–∞", minRating: 4000, maxRating: 4999, icon: "üíé", color: "#3498db" },
            { name: "–ê–ª–º–∞–∑", minRating: 5000, maxRating: 5999, icon: "üí†", color: "#1abc9c" },
            { name: "–ú–∞—Å—Ç–µ—Ä", minRating: 6000, maxRating: 6999, icon: "üëë", color: "#9b59b6" },
            { name: "–ì—Ä–∞–Ω–¥–º–∞—Å—Ç–µ—Ä", minRating: 7000, maxRating: 9999, icon: "üåü", color: "#e74c3c" }
        ];

        // –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
        const CHRISTMAS_QUESTS = [
            { id: "quest_snow", name: "–°–Ω–µ–∂–Ω—ã–π —Å–±–æ—Ä", description: "–°–æ–±–µ—Ä–∏—Ç–µ 50 —Å–Ω–µ–∂–∏–Ω–æ–∫ –≤ –æ—Ö–æ—Ç–µ", progress: 0, required: 50, reward: { gold: 1000, item: "snowflake" } },
            { id: "quest_gifts", name: "–ü–æ–¥–∞—Ä–∫–∏ –¥–ª—è –≤—Å–µ—Ö", description: "–û—Ç–∫—Ä–æ–π—Ç–µ 10 –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö —Å—É–Ω–¥—É–∫–æ–≤", progress: 0, required: 10, reward: { gold: 2000, crystals: 10 } },
            { id: "quest_battle", name: "–ù–æ–≤–æ–≥–æ–¥–Ω—è—è –±–∏—Ç–≤–∞", description: "–í—ã–∏–≥—Ä–∞–π—Ç–µ 5 PvP –±–æ–µ–≤", progress: 0, required: 5, reward: { gold: 3000, item: "santa_hat" } }
        ];

        // –í—Ä–∞–≥–∏
        const ENEMIES = [
            {
                id: "enemy_young_dragon",
                name: "–ú–æ–ª–æ–¥–æ–π –¥—Ä–∞–∫–æ–Ω",
                level: 1,
                health: 300,
                attack: 40,
                defense: 20,
                speed: 80,
                critical: 10,
                dodge: 5,
                rewards: { xp: 50, gold: 100, essence: 5 }
            },
            {
                id: "enemy_fire_lizard",
                name: "–û–≥–Ω–µ–Ω–Ω—ã–π —è—â–µ—Ä",
                level: 3,
                health: 600,
                attack: 80,
                defense: 40,
                speed: 100,
                critical: 15,
                dodge: 10,
                rewards: { xp: 100, gold: 200, essence: 10, crystals: 1 }
            }
        ];

        // –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–µ)
        let gameState = {
            version: GAME_VERSION,
            playerId: generatePlayerId(),
            dragonName: "–î—Ä–∞–∫–æ–Ω –ê–≥–∞—Ñ–æ–Ω–æ–≤–∞",
            level: 1,
            xp: 0,
            xpToNextLevel: 100,
            gold: 1000,
            essence: 500,
            crystals: 50,
            energy: 100,
            maxEnergy: 100,
            energyRegenTime: Date.now(),
            
            // –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä –¥–∞–Ω–Ω—ã–µ (–∏–∑ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏)
            multiplayer: {
                connected: false,
                rating: 1000,
                rank: "–ù–æ–≤–∏—á–æ–∫",
                wins: 0,
                losses: 0,
                onlineStatus: "offline",
                lastOnline: Date.now(),
                friends: [],
                guild: null
            },
            
            // –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∏–≤–µ–Ω—Ç (–∏–∑ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏)
            christmasEvent: {
                active: true,
                endTime: Date.now() + 10 * 24 * 60 * 60 * 1000, // 10 –¥–Ω–µ–π
                collectedSnowflakes: 0,
                openedChristmasChests: 0,
                completedQuests: [],
                collectedItems: []
            },
            
            // –°–∏—Å—Ç–µ–º—ã –∏–∑ –≤—Ç–æ—Ä–æ–π –≤–µ—Ä—Å–∏–∏
            baseStats: {
                attack: 150,
                defense: 75,
                health: 1000,
                maxHealth: 1000,
                speed: 120,
                critical: 15,
                dodge: 10
            },
            
            equipmentBonus: {
                attack: 0,
                defense: 0,
                health: 0,
                speed: 0,
                critical: 0,
                dodge: 0
            },
            
            activeBuffs: [],
            
            equipment: {
                head: null,
                chest: null,
                legs: null,
                weapon: null,
                wings: null,
                amulet: null
            },
            
            inventory: {
                armor: [],
                weapons: [],
                potions: [
                    { id: "potion_health_small", count: 3 },
                    { id: "potion_energy", count: 2 }
                ],
                materials: [
                    { id: "mat_dragon_scale", count: 5 }
                ],
                special: []
            },
            
            // PvP —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            pvpStats: {
                wins: 0,
                losses: 0,
                rating: 1000
            },
            
            lastSave: Date.now()
        };

        let currentBattle = null;
        let gameInterval = null;
        let energyInterval = null;

        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function generatePlayerId() {
            return 'player_' + Math.random().toString(36).substr(2, 9);
        }

        function createSnowflakes() {
            const snowflakesContainer = document.getElementById('snowflakes');
            for (let i = 0; i < 50; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.style.width = Math.random() * 10 + 5 + 'px';
                snowflake.style.height = snowflake.style.width;
                snowflake.style.left = Math.random() * 100 + 'vw';
                snowflake.style.opacity = Math.random() * 0.5 + 0.3;
                snowflake.style.animationDuration = Math.random() * 10 + 10 + 's';
                snowflake.style.animationDelay = Math.random() * 5 + 's';
                snowflakesContainer.appendChild(snowflake);
            }
        }

        function simulateLoading() {
            let currentProgress = 0;
            const progressBar = document.getElementById('loadingProgress');
            const loadingText = document.getElementById('loadingText');
            
            const interval = setInterval(() => {
                currentProgress += Math.random() * 10 + 5;
                if (currentProgress >= 100) {
                    currentProgress = 100;
                    clearInterval(interval);
                    
                    createSnowflakes();
                    
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('loadingScreen').style.display = 'none';
                            document.getElementById('mainMenu').style.display = 'flex';
                        }, 500);
                    }, 500);
                }
                
                progressBar.style.width = currentProgress + '%';
                
                const texts = [
                    "–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–≥–æ —á—É–¥–∞...",
                    "–£–∫—Ä–∞—à–∞–µ–º —ë–ª–∫—É...",
                    "–ì–æ—Ç–æ–≤–∏–º –ø–æ–¥–∞—Ä–∫–∏...",
                    "–ó–∞–ø—É—Å–∫–∞–µ–º —Å–Ω–µ–≥–æ–ø–∞–¥...",
                    "–ü–æ–¥–∫–ª—é—á–∞–µ–º –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä..."
                ];
                const textIndex = Math.floor(currentProgress / 20);
                loadingText.textContent = texts[textIndex] || texts[texts.length - 1];
            }, 200);
        }

        // ==================== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ====================
        function showAdminPanel() {
            document.getElementById('adminModal').style.display = 'block';
            document.getElementById('adminContent').style.display = 'none';
            document.getElementById('adminError').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }

        function checkAdminPassword(e) {
            if (e.key === 'Enter') {
                const password = document.getElementById('adminPassword').value;
                if (password === ADMIN_PASSWORD) {
                    document.getElementById('adminContent').style.display = 'block';
                    document.getElementById('adminError').style.display = 'none';
                    loadAdminData();
                } else {
                    document.getElementById('adminError').style.display = 'block';
                }
            }
        }

        function loadAdminData() {
            document.getElementById('adminGold').value = gameState.gold;
            document.getElementById('adminEssence').value = gameState.essence;
            document.getElementById('adminCrystals').value = gameState.crystals;
            document.getElementById('adminLevel').value = gameState.level;
            document.getElementById('adminAttack').value = gameState.baseStats?.attack || 150;
            document.getElementById('adminDefense').value = gameState.baseStats?.defense || 75;
            
            const itemsSelect = document.getElementById('adminItems');
            itemsSelect.innerHTML = '';
            
            const allItems = [...CHRISTMAS_ITEMS];
            allItems.forEach(item => {
                const option = document.createElement('option');
                option.value = item.id;
                option.textContent = `${item.icon} ${item.name}`;
                itemsSelect.appendChild(option);
            });
        }

        function adminAddItem() {
            const itemId = document.getElementById('adminItems').value;
            const item = CHRISTMAS_ITEMS.find(i => i.id === itemId);
            if (item) {
                addItemToInventory(item);
                showNotification(`–î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–µ–¥–º–µ—Ç: ${item.name}`);
            }
        }

        function adminApply() {
            gameState.gold = parseInt(document.getElementById('adminGold').value) || 0;
            gameState.essence = parseInt(document.getElementById('adminEssence').value) || 0;
            gameState.crystals = parseInt(document.getElementById('adminCrystals').value) || 0;
            gameState.level = parseInt(document.getElementById('adminLevel').value) || 1;
            
            if (gameState.baseStats) {
                gameState.baseStats.attack = parseInt(document.getElementById('adminAttack').value) || 150;
                gameState.baseStats.defense = parseInt(document.getElementById('adminDefense').value) || 75;
            }
            
            gameState.xpToNextLevel = gameState.level * 100;
            
            showNotification("–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!");
            updateUI();
        }

        function adminReset() {
            document.getElementById('adminGold').value = 1000;
            document.getElementById('adminEssence').value = 500;
            document.getElementById('adminCrystals').value = 50;
            document.getElementById('adminLevel').value = 1;
            document.getElementById('adminAttack').value = 150;
            document.getElementById('adminDefense').value = 75;
        }

        function adminClose() {
            document.getElementById('adminModal').style.display = 'none';
        }

        // ==================== –ú–£–õ–¨–¢–ò–ü–õ–ï–ï–† –°–ò–°–¢–ï–ú–ê ====================
        function connectMultiplayer() {
            if (!gameState.multiplayer.connected) {
                gameState.multiplayer.connected = true;
                gameState.multiplayer.onlineStatus = "online";
                gameState.playerId = generatePlayerId();
                
                const playerData = {
                    id: gameState.playerId,
                    name: gameState.dragonName,
                    level: gameState.level,
                    rating: gameState.multiplayer.rating,
                    status: "online",
                    avatar: "üêâ"
                };
                
                mockServer.onlinePlayers.push(playerData);
                updateLeaderboard();
                
                showNotification("–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä—É! üéÆ", 3000);
                addLog("üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–µ—Ä—É", "info");
                
                updateOnlinePlayers();
                updatePlayerProfile();
                
                startGame();
            } else {
                showNotification("–£–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä—É");
                startGame();
            }
        }

        function updateOnlinePlayers() {
            const onlinePlayersContainer = document.getElementById('onlinePlayers');
            const onlineCount = mockServer.onlinePlayers.filter(p => p.status === "online").length;
            
            document.getElementById('onlineCount').textContent = onlineCount;
            
            const playersToShow = mockServer.onlinePlayers.slice(0, 6);
            
            onlinePlayersContainer.innerHTML = playersToShow.map(player => `
                <div class="online-player" onclick="challengePlayer('${player.id}')">
                    <div style="font-size: 24px; margin-bottom: 5px;">${player.avatar}</div>
                    <div style="font-weight: bold; font-size: 14px;">${player.name}</div>
                    <div style="font-size: 12px; color: var(--color-text-secondary);">
                        <span class="player-status status-${player.status}"></span>
                        –£—Ä. ${player.level} | ${player.rating} —Ä–µ–π—Ç–∏–Ω–≥
                    </div>
                </div>
            `).join('');
            
            if (playersToShow.length < 6) {
                const bots = generateBots(6 - playersToShow.length);
                bots.forEach(bot => {
                    onlinePlayersContainer.innerHTML += `
                        <div class="online-player" onclick="challengePlayer('${bot.id}')">
                            <div style="font-size: 24px; margin-bottom: 5px;">${bot.avatar}</div>
                            <div style="font-weight: bold; font-size: 14px;">${bot.name}</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">
                                <span class="player-status status-online"></span>
                                –£—Ä. ${bot.level} | ${bot.rating} —Ä–µ–π—Ç–∏–Ω–≥
                            </div>
                        </div>
                    `;
                });
            }
        }

        function generateBots(count) {
            const botNames = ["–õ–µ–¥—è–Ω–æ–π –î—Ä–∞–∫–æ–Ω", "–û–≥–Ω–µ–Ω–Ω—ã–π –†—ã—Ü–∞—Ä—å", "–°–Ω–µ–∂–Ω–∞—è –ö–æ—Ä–æ–ª–µ–≤–∞", "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –≠–ª—å—Ñ"];
            const botAvatars = ["‚ùÑÔ∏è", "üî•", "üëë", "üßù"];
            
            return Array.from({ length: count }, (_, i) => ({
                id: 'bot_' + i,
                name: botNames[i] || `–ë–æ—Ç ${i + 1}`,
                level: Math.floor(Math.random() * 30) + 1,
                rating: Math.floor(Math.random() * 2000) + 1000,
                status: "online",
                avatar: botAvatars[i] || "ü§ñ",
                isBot: true
            }));
        }

        function refreshOnlinePlayers() {
            mockServer.onlinePlayers = mockServer.onlinePlayers.filter(p => 
                p.status === "online" || Date.now() - p.lastOnline < 300000
            );
            
            if (mockServer.onlinePlayers.length < 10) {
                const newBots = generateBots(3);
                mockServer.onlinePlayers.push(...newBots);
            }
            
            updateOnlinePlayers();
            showNotification("–°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω!");
        }

        function challengePlayer(playerId) {
            const player = mockServer.onlinePlayers.find(p => p.id === playerId) ||
                          mockServer.leaderboard.find(p => p.id === playerId);
            
            if (!player) {
                showNotification("–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω!");
                return;
            }
            
            if (player.id === gameState.playerId) {
                showNotification("–ù–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å —Å–∞–º–æ–≥–æ —Å–µ–±—è!");
                return;
            }
            
            if (gameState.energy < 30) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è PvP –±–æ—è!");
                return;
            }
            
            if (confirm(`–í—ã–∑–≤–∞—Ç—å ${player.name} –Ω–∞ –¥—É—ç–ª—å?\n–ï–≥–æ —É—Ä–æ–≤–µ–Ω—å: ${player.level}\n–†–µ–π—Ç–∏–Ω–≥: ${player.rating}`)) {
                startPvPBattle(player);
            }
        }

        function startPvPBattle(opponent) {
            gameState.energy -= 30;
            
            const playerPower = gameState.level * 100 + (gameState.baseStats?.attack || 0) + (gameState.baseStats?.defense || 0);
            const opponentPower = opponent.level * 100 + opponent.rating;
            
            const powerDiff = playerPower - opponentPower;
            const winChance = 50 + (powerDiff / 100);
            const isWin = Math.random() * 100 < Math.max(10, Math.min(90, winChance));
            
            const ratingChange = calculateRatingChange(gameState.multiplayer.rating, opponent.rating, isWin);
            
            if (isWin) {
                gameState.multiplayer.wins++;
                gameState.multiplayer.rating += ratingChange;
                gameState.gold += 500;
                gameState.xp += 100;
                
                gameState.christmasEvent.progress = (gameState.christmasEvent.progress || 0) + 1;
                
                showNotification(`üéâ –ü–æ–±–µ–¥–∞ –Ω–∞–¥ ${opponent.name}! +${ratingChange} —Ä–µ–π—Ç–∏–Ω–≥–∞`, 4000);
                addLog(`‚öîÔ∏è –ü–æ–±–µ–¥–∞ –≤ PvP! –†–µ–π—Ç–∏–Ω–≥: ${gameState.multiplayer.rating} (+${ratingChange})`, "loot");
            } else {
                gameState.multiplayer.losses++;
                gameState.multiplayer.rating = Math.max(0, gameState.multiplayer.rating - ratingChange);
                gameState.gold += 100;
                gameState.xp += 20;
                
                showNotification(`üí• –ü–æ—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç ${opponent.name}. -${ratingChange} —Ä–µ–π—Ç–∏–Ω–≥–∞`, 4000);
                addLog(`‚öîÔ∏è –ü–æ—Ä–∞–∂–µ–Ω–∏–µ –≤ PvP. –†–µ–π—Ç–∏–Ω–≥: ${gameState.multiplayer.rating} (-${ratingChange})`, "damage");
            }
            
            updatePlayerRank();
            updateLeaderboard();
            checkLevelUp();
            updateUI();
        }

        function calculateRatingChange(playerRating, opponentRating, isWin) {
            const expectedScore = 1 / (1 + Math.pow(10, (opponentRating - playerRating) / 400));
            const kFactor = 32;
            return Math.round(kFactor * ((isWin ? 1 : 0) - expectedScore));
        }

        function updatePlayerRank() {
            const rating = gameState.multiplayer.rating;
            const rank = PVP_RANKS.find(r => rating >= r.minRating && rating <= r.maxRating) || PVP_RANKS[0];
            gameState.multiplayer.rank = rank.name;
            
            document.getElementById('playerRank').textContent = rank.name;
            document.getElementById('playerRank').style.background = `linear-gradient(45deg, ${rank.color}, ${darkenColor(rank.color, 20)})`;
        }

        function darkenColor(color, percent) {
            return color;
        }

        // ==================== –ù–û–í–û–ì–û–î–ù–ò–ô –ò–í–ï–ù–¢ ====================
        function updateChristmasEvent() {
            if (!gameState.christmasEvent.active) return;
            
            const timeLeft = gameState.christmasEvent.endTime - Date.now();
            if (timeLeft <= 0) {
                gameState.christmasEvent.active = false;
                showNotification("–ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å! üéâ");
                return;
            }
            
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('eventTimer').textContent = 
                `–î–æ –∫–æ–Ω—Ü–∞: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            updateChristmasQuests();
        }

        function updateChristmasQuests() {
            const questsContainer = document.getElementById('eventTasks');
            
            CHRISTMAS_QUESTS.forEach(quest => {
                if (!gameState.christmasEvent.completedQuests.includes(quest.id)) {
                    quest.progress = Math.min(quest.required, quest.progress + Math.floor(Math.random() * 3));
                }
            });
            
            questsContainer.innerHTML = CHRISTMAS_QUESTS.map(quest => {
                const isCompleted = gameState.christmasEvent.completedQuests.includes(quest.id);
                const progressPercent = (quest.progress / quest.required) * 100;
                
                return `
                    <div class="event-task">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <div style="font-weight: bold;">${quest.name}</div>
                            <div style="color: ${isCompleted ? 'var(--color-success)' : 'var(--color-text-secondary)'}">
                                ${quest.progress}/${quest.required}
                            </div>
                        </div>
                        <div style="font-size: 14px; color: var(--color-text-secondary); margin-bottom: 10px;">
                            ${quest.description}
                        </div>
                        <div style="height: 5px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden;">
                            <div style="height: 100%; width: ${progressPercent}%; background: linear-gradient(90deg, var(--color-christmas-red), var(--color-christmas-green)); border-radius: 3px;"></div>
                        </div>
                        ${quest.progress >= quest.required && !isCompleted ? `
                            <button onclick="completeChristmasQuest('${quest.id}')" 
                                    style="margin-top: 10px; padding: 5px 15px; background: var(--color-christmas-gold); border: none; border-radius: 5px; color: #000; cursor: pointer; font-weight: bold; width: 100%;">
                                –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É
                            </button>
                        ` : ''}
                        ${isCompleted ? `
                            <div class="event-reward">–ó–∞–≤–µ—Ä—à–µ–Ω–æ! üéâ</div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function completeChristmasQuest(questId) {
            const quest = CHRISTMAS_QUESTS.find(q => q.id === questId);
            if (!quest) return;
            
            gameState.gold += quest.reward.gold;
            if (quest.reward.crystals) gameState.crystals += quest.reward.crystals;
            if (quest.reward.item) {
                const item = CHRISTMAS_ITEMS.find(i => i.id === quest.reward.item);
                if (item) {
                    addItemToInventory(item);
                    gameState.christmasEvent.collectedItems.push(item.id);
                }
            }
            
            gameState.christmasEvent.completedQuests.push(questId);
            
            showNotification(`–ó–∞–¥–∞–Ω–∏–µ "${quest.name}" –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞.`, 3000);
            addLog(`üéÑ –ó–∞–¥–∞–Ω–∏–µ "${quest.name}" –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –ü–æ–ª—É—á–µ–Ω–æ ${quest.reward.gold} –∑–æ–ª–æ—Ç–∞`, "quest");
            
            updateChristmasQuests();
            updateUI();
        }

        // ==================== –¢–û–ü –ò–ì–†–û–ö–û–í ====================
        function updateLeaderboard() {
            const playerIndex = mockServer.leaderboard.findIndex(p => p.id === gameState.playerId);
            const playerData = {
                id: gameState.playerId,
                name: gameState.dragonName,
                level: gameState.level,
                rating: gameState.multiplayer.rating,
                guild: gameState.multiplayer.guild,
                wins: gameState.multiplayer.wins,
                avatar: "üêâ"
            };
            
            if (playerIndex !== -1) {
                mockServer.leaderboard[playerIndex] = playerData;
            } else {
                mockServer.leaderboard.push(playerData);
            }
            
            mockServer.leaderboard.sort((a, b) => b.rating - a.rating);
            mockServer.leaderboard = mockServer.leaderboard.slice(0, 10);
            
            if (mockServer.leaderboard.length < 10) {
                const bots = generateBots(10 - mockServer.leaderboard.length);
                mockServer.leaderboard.push(...bots);
                mockServer.leaderboard.sort((a, b) => b.rating - a.rating);
                mockServer.leaderboard = mockServer.leaderboard.slice(0, 10);
            }
            
            const leaderboardContainer = document.getElementById('leaderboard');
            leaderboardContainer.innerHTML = mockServer.leaderboard.map((player, index) => {
                const rankClass = `rank-${index + 1}`;
                const isCurrentPlayer = player.id === gameState.playerId;
                
                return `
                    <div class="leaderboard-item ${rankClass}" style="${isCurrentPlayer ? 'background: rgba(255, 138, 0, 0.1);' : ''}">
                        <div class="leaderboard-rank">#${index + 1}</div>
                        <div style="display: flex; align-items: center; gap: 10px; flex: 1;">
                            <div style="font-size: 24px;">${player.avatar}</div>
                            <div style="flex: 1;">
                                <div style="font-weight: bold; ${isCurrentPlayer ? 'color: var(--color-primary);' : ''}">
                                    ${player.name} ${isCurrentPlayer ? '(–í—ã)' : ''}
                                </div>
                                <div style="font-size: 12px; color: var(--color-text-secondary);">
                                    –£—Ä–æ–≤–µ–Ω—å ${player.level} | ${player.rating} —Ä–µ–π—Ç–∏–Ω–≥
                                </div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 12px; color: var(--color-text-secondary);">${player.wins || 0} –ø–æ–±–µ–¥</div>
                            ${player.guild ? `<div style="font-size: 11px; color: #666;">${player.guild}</div>` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showLeaderboard() {
            updateLeaderboard();
            
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üèÜ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="margin: 20px 0; text-align: center;">
                        <div style="font-size: 18px; color: var(--color-text-secondary); margin-bottom: 10px;">
                            –í–∞—à–µ –º–µ—Å—Ç–æ: <span style="color: var(--color-primary); font-weight: bold;">#${getPlayerRank()}</span>
                        </div>
                        <div style="font-size: 14px; color: var(--color-christmas-gold);">
                            –†–µ–π—Ç–∏–Ω–≥: ${gameState.multiplayer.rating} | –†–∞–Ω–≥: ${gameState.multiplayer.rank}
                        </div>
                    </div>
                    
                    <div class="leaderboard-list">
                        ${mockServer.leaderboard.map((player, index) => {
                            const isCurrentPlayer = player.id === gameState.playerId;
                            return `
                                <div class="leaderboard-item rank-${index + 1}" style="${isCurrentPlayer ? 'background: rgba(255, 138, 0, 0.1);' : ''}">
                                    <div class="leaderboard-rank">#${index + 1}</div>
                                    <div style="display: flex; align-items: center; gap: 10px; flex: 1;">
                                        <div style="font-size: 24px;">${player.avatar}</div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: bold; ${isCurrentPlayer ? 'color: var(--color-primary);' : ''}">
                                                ${player.name} ${isCurrentPlayer ? '(–í—ã)' : ''}
                                            </div>
                                            <div style="font-size: 12px; color: var(--color-text-secondary);">
                                                –£—Ä–æ–≤–µ–Ω—å ${player.level} | ${player.rating} —Ä–µ–π—Ç–∏–Ω–≥
                                            </div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-weight: bold; color: ${getRankColor(index + 1)};">${getRankIcon(index + 1)}</div>
                                        <div style="font-size: 12px; color: var(--color-text-secondary);">${player.wins || 0} –ø–æ–±–µ–¥</div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    
                    <div style="margin-top: 30px; padding: 15px; background: rgba(255, 215, 0, 0.1); border-radius: 10px; border-left: 4px solid var(--color-christmas-gold);">
                        <div style="color: var(--color-christmas-gold); font-weight: bold; margin-bottom: 5px;">–ö–∞–∫ –ø–æ–¥–Ω—è—Ç—å—Å—è –≤ —Ç–æ–ø?</div>
                        <div style="font-size: 14px; color: var(--color-text-secondary);">
                            ‚Ä¢ –£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ PvP –±–æ—è—Ö<br>
                            ‚Ä¢ –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è<br>
                            ‚Ä¢ –ü–æ–±–µ–∂–¥–∞–π—Ç–µ –≤ –∏–≤–µ–Ω—Ç–∞—Ö<br>
                            ‚Ä¢ –ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function getPlayerRank() {
            const sorted = [...mockServer.leaderboard].sort((a, b) => b.rating - a.rating);
            const index = sorted.findIndex(p => p.id === gameState.playerId);
            return index !== -1 ? index + 1 : "–ù–µ –≤ —Ç–æ–ø–µ";
        }

        function getRankColor(rank) {
            if (rank === 1) return '#ffd700';
            if (rank === 2) return '#c0c0c0';
            if (rank === 3) return '#cd7f32';
            return 'var(--color-text-secondary)';
        }

        function getRankIcon(rank) {
            if (rank === 1) return 'üëë';
            if (rank === 2) return 'ü•à';
            if (rank === 3) return 'ü•â';
            return rank;
        }

        // ==================== –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –û–•–û–¢–´ ====================
        function startHunt() {
            if (gameState.energy < 10) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è –æ—Ö–æ—Ç—ã!");
                return;
            }
            
            gameState.energy -= 10;
            
            const eventRoll = Math.random();
            let result = null;
            
            if (eventRoll < 0.4) {
                result = generateSnowflakeHunt();
            } else if (eventRoll < 0.7) {
                result = generateRegularHunt();
            } else if (eventRoll < 0.9) {
                result = generateChristmasGift();
            } else {
                result = generateChristmasBoss();
            }
            
            applyHuntResult(result);
            updateUI();
        }

        function generateSnowflakeHunt() {
            const snowflakes = Math.floor(Math.random() * 5) + 1;
            gameState.christmasEvent.collectedSnowflakes = (gameState.christmasEvent.collectedSnowflakes || 0) + snowflakes;
            
            return {
                type: "snowflake",
                snowflakes: snowflakes,
                message: `‚ùÑÔ∏è –í—ã —Å–æ–±—Ä–∞–ª–∏ ${snowflakes} —Å–Ω–µ–∂–∏–Ω–æ–∫!`
            };
        }

        function generateChristmasGift() {
            const gift = CHRISTMAS_ITEMS[Math.floor(Math.random() * CHRISTMAS_ITEMS.length)];
            
            return {
                type: "gift",
                item: gift,
                message: `üéÅ –ù–∞–π–¥–µ–Ω –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–π –ø–æ–¥–∞—Ä–æ–∫: ${gift.name}!`
            };
        }

        function generateChristmasBoss() {
            const bosses = [
                { name: "–°–Ω–µ–∂–Ω—ã–π –ì–æ–ª–µ–º", health: 2000, attack: 150, reward: { gold: 1000, item: "snowflake" } },
                { name: "–õ–µ–¥—è–Ω–æ–π –î—Ä–∞–∫–æ–Ω", health: 3000, attack: 200, reward: { gold: 1500, item: "candy_cane" } }
            ];
            
            const boss = bosses[Math.floor(Math.random() * bosses.length)];
            
            return {
                type: "boss",
                boss: boss,
                message: `üëπ –í—Å—Ç—Ä–µ—á–µ–Ω ${boss.name}!`
            };
        }

        function generateRegularHunt() {
            const baseGold = Math.floor(Math.random() * 100) + 50 + gameState.level * 10;
            const baseXp = Math.floor(Math.random() * 30) + 20 + gameState.level * 5;
            
            return {
                type: "success",
                gold: baseGold,
                xp: baseXp,
                essence: Math.random() < 0.3 ? Math.floor(Math.random() * 10) + 5 : 0,
                items: []
            };
        }

        function applyHuntResult(result) {
            let logMessage = "";
            let logType = "info";
            
            switch(result.type) {
                case "success":
                    gameState.gold += result.gold;
                    gameState.xp += result.xp;
                    gameState.essence += result.essence || 0;
                    
                    logMessage = `üèπ –û—Ö–æ—Ç–∞ —É—Å–ø–µ—à–Ω–∞! –ü–æ–ª—É—á–µ–Ω–æ: ${result.gold} –∑–æ–ª–æ—Ç–∞, ${result.xp} –æ–ø—ã—Ç–∞`;
                    if (result.essence) logMessage += `, ${result.essence} —ç—Å—Å–µ–Ω—Ü–∏–∏`;
                    
                    logType = "loot";
                    break;
                    
                case "enemy":
                    startBattle(ENEMIES[Math.floor(Math.random() * ENEMIES.length)]);
                    logMessage = `‚öîÔ∏è –í–æ –≤—Ä–µ–º—è –æ—Ö–æ—Ç—ã –≤—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –≤—Ä–∞–≥–∞!`;
                    logType = "damage";
                    break;
                    
                case "snowflake":
                    logMessage = result.message;
                    logType = "loot";
                    break;
                    
                case "gift":
                    addItemToInventory(result.item);
                    logMessage = result.message;
                    logType = "loot";
                    break;
                    
                case "boss":
                    logMessage = result.message;
                    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–∏—Ç–≤—É —Å –±–æ—Å—Å–æ–º
                    logType = "damage";
                    break;
            }
            
            addLog(logMessage, logType);
            checkLevelUp();
        }

        // ==================== –°–ò–°–¢–ï–ú–ê –ò–ù–í–ï–ù–¢–ê–†–Ø ====================
        function switchInventoryTab(tabName) {
            document.querySelectorAll('.inventory-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            updateInventory(tabName);
        }

        function updateInventory(category = 'armor') {
            const inventoryContent = document.getElementById('inventoryContent');
            
            let items = [];
            switch(category) {
                case 'armor': items = gameState.inventory.armor; break;
                case 'weapons': items = gameState.inventory.weapons; break;
                case 'potions': items = gameState.inventory.potions; break;
                case 'materials': items = gameState.inventory.materials; break;
                case 'special': items = gameState.inventory.special; break;
            }
            
            if (items.length === 0) {
                inventoryContent.innerHTML = `
                    <div style="text-align: center; padding: 50px; color: var(--color-text-secondary);">
                        <div style="font-size: 48px; margin-bottom: 20px;">üì¶</div>
                        <div style="font-size: 18px;">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div>
                        <div style="font-size: 14px; margin-top: 10px;">–°–æ–±–∏—Ä–∞–π—Ç–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –æ—Ö–æ—Ç–µ –∏ —Å—É–Ω–¥—É–∫–∞—Ö</div>
                    </div>
                `;
                return;
            }
            
            const groupedItems = {};
            items.forEach(item => {
                if (!groupedItems[item.id]) {
                    const itemData = findItemById(item.id);
                    if (itemData) {
                        groupedItems[item.id] = {
                            ...itemData,
                            count: 0,
                            category: category
                        };
                    }
                }
                groupedItems[item.id].count += item.count || 1;
            });
            
            const itemList = Object.values(groupedItems);
            
            inventoryContent.innerHTML = `
                <div class="item-grid">
                    ${itemList.map(item => `
                        <div class="item-slot item-rarity-${item.rarity}" 
                             onclick="showItemDetails('${item.id}', '${category}')"
                             title="${item.name}">
                            <div class="item-icon">${item.icon}</div>
                            <div class="item-name">${item.name}</div>
                            ${item.count > 1 ? `<div class="item-count">${item.count}</div>` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function findItemById(itemId) {
            for (const category in ITEM_DATABASE) {
                const item = ITEM_DATABASE[category].find(i => i.id === itemId);
                if (item) return item;
            }
            return null;
        }

        function addItemToInventory(item) {
            const categoryMap = {
                'helmet': 'armor',
                'chest': 'armor', 
                'weapon': 'weapons',
                'potion': 'potions',
                'mat_': 'materials'
            };
            
            let category = 'special';
            
            for (const prefix in categoryMap) {
                if (item.id.startsWith(prefix)) {
                    category = categoryMap[prefix];
                    break;
                }
            }
            
            if (category === 'special') {
                if (CHRISTMAS_ITEMS.some(i => i.id === item.id)) category = 'special';
            }
            
            const existingItem = gameState.inventory[category]?.find(i => i.id === item.id);
            if (existingItem) {
                existingItem.count = (existingItem.count || 1) + 1;
            } else {
                gameState.inventory[category].push({
                    id: item.id,
                    count: 1
                });
            }
        }

        function showItemDetails(itemId, category) {
            const item = findItemById(itemId);
            if (!item) return;
            
            let itemStatsHTML = "";
            if (item.stats) {
                itemStatsHTML = `
                    <div style="margin: 20px 0;">
                        <div style="color: var(--color-primary); margin-bottom: 10px;">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</div>
                        ${Object.entries(item.stats).map(([stat, value]) => `
                            <div style="display: flex; justify-content: space-between; margin: 5px 0; padding: 5px 10px; background: rgba(0,0,0,0.2); border-radius: 5px;">
                                <span>${getStatDisplayName(stat)}:</span>
                                <span style="color: #4dffea; font-weight: bold;">+${value}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">${item.icon} ${item.name}</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 60px; color: ${getRarityColor(item.rarity)};">${item.icon}</div>
                        <div style="color: ${getRarityColor(item.rarity)}; font-size: 18px; margin: 10px 0; font-weight: bold;">
                            ${getRarityName(item.rarity)}
                        </div>
                        ${item.level ? `<div style="color: var(--color-text-secondary);">–¢—Ä–µ–±—É–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å: ${item.level}</div>` : ''}
                    </div>
                    
                    <div style="margin: 20px 0; color: var(--color-text-secondary); line-height: 1.5;">
                        ${item.description || "–¢–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –¥—Ä–µ–≤–Ω–∏—Ö –¥—Ä–∞–∫–æ–Ω–æ–≤."}
                    </div>
                    
                    ${itemStatsHTML}
                    
                    <div style="display: flex; gap: 10px; margin-top: 30px;">
                        <button onclick="useItem('${item.id}', '${category}')" 
                                style="flex: 1; padding: 12px; background: linear-gradient(45deg, var(--color-success), #1dd1a1); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: bold;">
                            –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
                        </button>
                        <button onclick="sellItem('${item.id}', '${category}')" 
                                style="flex: 1; padding: 12px; background: linear-gradient(45deg, var(--color-danger), #ff6b81); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: bold;">
                            –ü—Ä–æ–¥–∞—Ç—å –∑–∞ ${Math.floor((item.price || 50) * 0.7)} –∑–æ–ª–æ—Ç–∞
                        </button>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function useItem(itemId, category) {
            const item = findItemById(itemId);
            if (!item) return;
            
            if (category === 'potions' && item.effect) {
                if (item.effect.health) {
                    gameState.baseStats.health = Math.min(
                        gameState.baseStats.maxHealth,
                        gameState.baseStats.health + item.effect.health
                    );
                    showNotification(`–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–µ–ª—å–µ –∑–¥–æ—Ä–æ–≤—å—è. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${item.effect.health} HP.`);
                }
                
                if (item.effect.energy) {
                    gameState.energy = Math.min(
                        gameState.maxEnergy,
                        gameState.energy + item.effect.energy
                    );
                    showNotification(`–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–µ–ª—å–µ —ç–Ω–µ—Ä–≥–∏–∏. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${item.effect.energy} —ç–Ω–µ—Ä–≥–∏–∏.`);
                }
                
                removeItemFromInventory(itemId, category);
            }
            
            closeModal();
            updateUI();
            updateInventory(category);
        }

        function sellItem(itemId, category) {
            const item = findItemById(itemId);
            if (!item) return;
            
            const sellPrice = Math.floor((item.price || 50) * 0.7);
            removeItemFromInventory(itemId, category);
            gameState.gold += sellPrice;
            
            showNotification(`–ü—Ä–µ–¥–º–µ—Ç "${item.name}" –ø—Ä–æ–¥–∞–Ω –∑–∞ ${sellPrice} –∑–æ–ª–æ—Ç–∞!`);
            closeModal();
            updateUI();
            updateInventory(category);
        }

        function removeItemFromInventory(itemId, category) {
            const itemIndex = gameState.inventory[category]?.findIndex(i => i.id === itemId);
            if (itemIndex === -1) return false;
            
            const item = gameState.inventory[category][itemIndex];
            
            if (item.count > 1) {
                item.count--;
            } else {
                gameState.inventory[category].splice(itemIndex, 1);
            }
            
            return true;
        }

        function getRarityColor(rarity) {
            const colors = {
                common: '#a9b7c6',
                uncommon: '#2ed573',
                rare: '#3742fa',
                epic: '#9b59b6',
                legendary: '#f1c40f',
                mythical: '#e74c3c'
            };
            return colors[rarity] || '#a9b7c6';
        }

        function getRarityName(rarity) {
            const names = {
                common: '–û–±—ã—á–Ω—ã–π',
                uncommon: '–ù–µ–æ–±—ã—á–Ω—ã–π',
                rare: '–†–µ–¥–∫–∏–π',
                epic: '–≠–ø–∏—á–µ—Å–∫–∏–π',
                legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π',
                mythical: '–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π'
            };
            return names[rarity] || '–û–±—ã—á–Ω—ã–π';
        }

        function getStatDisplayName(stat) {
            const names = {
                attack: '–ê—Ç–∞–∫–∞',
                defense: '–ó–∞—â–∏—Ç–∞',
                health: '–ó–¥–æ—Ä–æ–≤—å–µ',
                speed: '–°–∫–æ—Ä–æ—Å—Ç—å',
                critical: '–ö—Ä–∏—Ç. —à–∞–Ω—Å',
                dodge: '–£–∫–ª–æ–Ω–µ–Ω–∏–µ'
            };
            return names[stat] || stat;
        }

        // ==================== –ë–û–ï–í–ê–Ø –°–ò–°–¢–ï–ú–ê ====================
        function startBattle(enemy, isBoss = false) {
            currentBattle = {
                enemy: enemy,
                isBoss: isBoss,
                playerHealth: gameState.baseStats.health,
                enemyHealth: enemy.health,
                playerMaxHealth: gameState.baseStats.health,
                enemyMaxHealth: enemy.health,
                turn: "player",
                round: 1,
                battleLog: []
            };
            
            document.getElementById('battleContainer').style.display = 'flex';
            updateBattleUI();
            addLog(`‚öîÔ∏è –ù–∞—á–∞–ª–∞—Å—å –±–∏—Ç–≤–∞ —Å ${enemy.name}${isBoss ? " (–ë–û–°–°)" : ""}!`, "damage");
        }

        function updateBattleUI() {
            if (!currentBattle) return;
            
            const { enemy, playerHealth, enemyHealth, playerMaxHealth, enemyMaxHealth } = currentBattle;
            
            document.getElementById('battlePlayerName').textContent = gameState.dragonName;
            document.getElementById('battleEnemyName').textContent = enemy.name + (currentBattle.isBoss ? " ‚≠ê" : "");
            
            const playerHealthPercent = Math.max(0, (playerHealth / playerMaxHealth) * 100);
            const enemyHealthPercent = Math.max(0, (enemyHealth / enemyMaxHealth) * 100);
            
            document.getElementById('playerHealthBar').style.width = `${playerHealthPercent}%`;
            document.getElementById('enemyHealthBar').style.width = `${enemyHealthPercent}%`;
            
            document.getElementById('playerBattleStats').innerHTML = `
                <div>–£—Ä–æ–≤–µ–Ω—å: ${gameState.level}</div>
                <div>–ê—Ç–∞–∫–∞: ${gameState.baseStats.attack}</div>
                <div>–ó–∞—â–∏—Ç–∞: ${gameState.baseStats.defense}</div>
                <div>–ó–¥–æ—Ä–æ–≤—å–µ: ${playerHealth}/${playerMaxHealth}</div>
            `;
            
            document.getElementById('enemyBattleStats').innerHTML = `
                <div>–£—Ä–æ–≤–µ–Ω—å: ${enemy.level}</div>
                <div>–ê—Ç–∞–∫–∞: ${enemy.attack}</div>
                <div>–ó–∞—â–∏—Ç–∞: ${enemy.defense}</div>
                <div>–ó–¥–æ—Ä–æ–≤—å–µ: ${enemyHealth}/${enemyMaxHealth}</div>
            `;
            
            updateBattleActions();
            updateBattleLog();
        }

        function updateBattleActions() {
            const battleActions = document.getElementById('battleActions');
            battleActions.innerHTML = '';
            
            const actions = [
                { 
                    name: "–ê—Ç–∞–∫–∞", 
                    icon: "‚öîÔ∏è", 
                    action: () => performAttack(),
                    description: "–ë–∞–∑–æ–≤–∞—è –∞—Ç–∞–∫–∞"
                },
                { 
                    name: "–ó–∞—â–∏—Ç–∞", 
                    icon: "üõ°Ô∏è", 
                    action: () => useDefense(),
                    description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É"
                },
                { 
                    name: "–ò—Å—Ü–µ–ª–µ–Ω–∏–µ", 
                    icon: "‚ù§Ô∏è", 
                    action: () => useHealing(),
                    description: "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ"
                },
                { 
                    name: "–ë–µ–≥—Å—Ç–≤–æ", 
                    icon: "üèÉ", 
                    action: () => attemptEscape(),
                    description: "–ü–æ–ø—ã—Ç–∫–∞ —É–±–µ–∂–∞—Ç—å",
                    disabled: currentBattle.isBoss
                }
            ];
            
            actions.forEach(action => {
                const button = document.createElement('button');
                button.className = 'battle-action';
                button.innerHTML = `${action.icon} ${action.name}`;
                button.onclick = action.action;
                button.disabled = action.disabled || currentBattle.turn !== "player";
                button.title = action.description;
                battleActions.appendChild(button);
            });
        }

        function performAttack() {
            if (!currentBattle || currentBattle.turn !== "player") return;
            
            const { enemy } = currentBattle;
            
            let damage = gameState.baseStats.attack;
            const critChance = gameState.baseStats.critical;
            const isCritical = Math.random() * 100 < critChance;
            if (isCritical) damage *= 2;
            
            damage = Math.max(1, damage - (enemy.defense / 2));
            currentBattle.enemyHealth -= damage;
            
            const logMessage = isCritical 
                ? `üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä! –í—ã –Ω–∞–Ω–µ—Å–ª–∏ ${damage} —É—Ä–æ–Ω–∞!`
                : `‚öîÔ∏è –í—ã –Ω–∞–Ω–µ—Å–ª–∏ ${damage} —É—Ä–æ–Ω–∞.`;
            
            addBattleLog(logMessage);
            
            if (currentBattle.enemyHealth <= 0) {
                endBattle(true);
                return;
            }
            
            currentBattle.turn = "enemy";
            setTimeout(enemyTurn, 1500);
            updateBattleUI();
        }

        function enemyTurn() {
            if (!currentBattle || currentBattle.turn !== "enemy") return;
            
            const { enemy } = currentBattle;
            
            let damage = enemy.attack;
            damage = Math.max(1, damage - (gameState.baseStats.defense / 2));
            
            const dodgeChance = gameState.baseStats.dodge;
            const isDodged = Math.random() * 100 < dodgeChance;
            
            if (isDodged) {
                addBattleLog(`üåÄ –í—ã —É–∫–ª–æ–Ω–∏–ª–∏—Å—å –æ—Ç –∞—Ç–∞–∫–∏ ${enemy.name}!`);
            } else {
                currentBattle.playerHealth -= damage;
                addBattleLog(`‚öîÔ∏è ${enemy.name} –Ω–∞–Ω–æ—Å–∏—Ç ${damage} —É—Ä–æ–Ω–∞.`);
                
                if (currentBattle.playerHealth <= 0) {
                    endBattle(false);
                    return;
                }
            }
            
            currentBattle.turn = "player";
            currentBattle.round++;
            updateBattleUI();
        }

        function useDefense() {
            if (!currentBattle || currentBattle.turn !== "player") return;
            
            addBattleLog(`üõ°Ô∏è –í—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ –∑–∞—â–∏—Ç–Ω—É—é —Å—Ç–æ–π–∫—É. –ó–∞—â–∏—Ç–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ö–æ–¥.`, "info");
            currentBattle.turn = "enemy";
            setTimeout(enemyTurn, 1500);
            updateBattleUI();
        }

        function useHealing() {
            if (!currentBattle || currentBattle.turn !== "player") return;
            
            const healAmount = Math.floor(gameState.baseStats.maxHealth * 0.15);
            currentBattle.playerHealth = Math.min(currentBattle.playerMaxHealth, currentBattle.playerHealth + healAmount);
            
            addBattleLog(`‚ù§Ô∏è –í—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ ${healAmount} –∑–¥–æ—Ä–æ–≤—å—è.`, "heal");
            currentBattle.turn = "enemy";
            setTimeout(enemyTurn, 1500);
            updateBattleUI();
        }

        function attemptEscape() {
            if (!currentBattle || currentBattle.turn !== "player") return;
            
            const escapeChance = Math.min(80, gameState.baseStats.speed / 2);
            const isEscaped = Math.random() * 100 < escapeChance;
            
            if (isEscaped) {
                addBattleLog("üèÉ –í—ã —É—Å–ø–µ—à–Ω–æ —Å–±–µ–∂–∞–ª–∏ —Å –ø–æ–ª—è –±–æ—è!", "info");
                setTimeout(() => {
                    document.getElementById('battleContainer').style.display = 'none';
                    currentBattle = null;
                }, 1000);
            } else {
                addBattleLog("üí• –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–±–µ–≥–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å!", "damage");
                currentBattle.turn = "enemy";
                setTimeout(enemyTurn, 1500);
            }
            
            updateBattleUI();
        }

        function endBattle(playerWon) {
            const { enemy, isBoss } = currentBattle;
            
            if (playerWon) {
                const rewards = enemy.rewards;
                gameState.gold += rewards.gold;
                gameState.xp += rewards.xp;
                gameState.essence += rewards.essence || 0;
                gameState.crystals += rewards.crystals || 0;
                
                addBattleLog(`üéâ –ü–æ–±–µ–¥–∞! –ü–æ–ª—É—á–µ–Ω–æ: ${rewards.gold} –∑–æ–ª–æ—Ç–∞, ${rewards.xp} –æ–ø—ã—Ç–∞${rewards.essence ? `, ${rewards.essence} —ç—Å—Å–µ–Ω—Ü–∏–∏` : ''}`, "loot");
                
                checkLevelUp();
                
            } else {
                addBattleLog("‚ò†Ô∏è –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ –±–∏—Ç–≤—É...", "damage");
            }
            
            gameState.baseStats.health = Math.max(1, currentBattle.playerHealth);
            
            setTimeout(() => {
                document.getElementById('battleContainer').style.display = 'none';
                
                if (playerWon) {
                    addLog(`‚öîÔ∏è –ü–æ–±–µ–¥–∞ –Ω–∞–¥ ${enemy.name}${isBoss ? " (–ë–û–°–°)" : ""}! –ü–æ–ª—É—á–µ–Ω–æ ${rewards.xp} –æ–ø—ã—Ç–∞.`, "loot");
                } else {
                    addLog(`‚öîÔ∏è –ü–æ—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç ${enemy.name}. –ù—É–∂–Ω–æ —Å—Ç–∞—Ç—å —Å–∏–ª—å–Ω–µ–µ!`, "damage");
                }
                
                currentBattle = null;
                updateUI();
            }, 2000);
        }

        function addBattleLog(message, type = "info") {
            if (!currentBattle) return;
            
            currentBattle.battleLog.push({ message, type, round: currentBattle.round });
            
            const logContainer = document.getElementById('battleLogContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[–•–æ–¥ ${currentBattle.round}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function updateBattleLog() {
            const logContainer = document.getElementById('battleLogContainer');
            logContainer.innerHTML = '';
            
            if (!currentBattle || !currentBattle.battleLog) return;
            
            currentBattle.battleLog.forEach(log => {
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry log-${log.type}`;
                logEntry.textContent = `[–•–æ–¥ ${log.round}] ${log.message}`;
                logContainer.appendChild(logEntry);
            });
            
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        // ==================== –ò–ì–†–û–í–´–ï –°–ò–°–¢–ï–ú–´ ====================
        function startGame() {
            document.getElementById('mainMenu').style.display = 'none';
            initializeNewGame();
            document.getElementById('gameContainer').style.display = 'block';
            startGameLoops();
            showNotification("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –¥—Ä–∞–∫–æ–Ω–æ–≤!");
            addLog("üöÄ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –£–¥–∞—á–∏ –≤ —Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–µ–ª–∏—á–∞–π—à–∏–º –¥—Ä–∞–∫–æ–Ω–æ–º!", "info");
        }

        function initializeNewGame() {
            gameState = {
                version: GAME_VERSION,
                playerId: generatePlayerId(),
                dragonName: "–î—Ä–∞–∫–æ–Ω –ê–≥–∞—Ñ–æ–Ω–æ–≤–∞",
                level: 1,
                xp: 0,
                xpToNextLevel: 100,
                gold: 1000,
                essence: 500,
                crystals: 50,
                energy: 100,
                maxEnergy: 100,
                energyRegenTime: Date.now(),
                
                multiplayer: {
                    connected: false,
                    rating: 1000,
                    rank: "–ù–æ–≤–∏—á–æ–∫",
                    wins: 0,
                    losses: 0,
                    onlineStatus: "offline",
                    lastOnline: Date.now(),
                    friends: [],
                    guild: null
                },
                
                christmasEvent: {
                    active: true,
                    endTime: Date.now() + 10 * 24 * 60 * 60 * 1000,
                    collectedSnowflakes: 0,
                    openedChristmasChests: 0,
                    completedQuests: [],
                    collectedItems: []
                },
                
                baseStats: {
                    attack: 150,
                    defense: 75,
                    health: 1000,
                    maxHealth: 1000,
                    speed: 120,
                    critical: 15,
                    dodge: 10
                },
                
                equipmentBonus: {
                    attack: 0,
                    defense: 0,
                    health: 0,
                    speed: 0,
                    critical: 0,
                    dodge: 0
                },
                
                activeBuffs: [],
                equipment: {
                    head: null,
                    chest: null,
                    legs: null,
                    weapon: null,
                    wings: null,
                    amulet: null
                },
                
                inventory: {
                    armor: [],
                    weapons: [],
                    potions: [
                        { id: "potion_health_small", count: 3 },
                        { id: "potion_energy", count: 2 }
                    ],
                    materials: [
                        { id: "mat_dragon_scale", count: 5 }
                    ],
                    special: []
                },
                
                pvpStats: {
                    wins: 0,
                    losses: 0,
                    rating: 1000
                },
                
                lastSave: Date.now()
            };
            
            updateUI();
            updateInventory('armor');
        }

        function loadGame() {
            try {
                const savedData = localStorage.getItem('dragonEvolutionSave');
                if (!savedData) {
                    showNotification("–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∏–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!");
                    return;
                }
                
                const loadedState = JSON.parse(savedData);
                
                if (loadedState.version !== GAME_VERSION) {
                    showNotification("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏. –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É.");
                    startGame();
                    return;
                }
                
                Object.assign(gameState, loadedState);
                
                document.getElementById('mainMenu').style.display = 'none';
                document.getElementById('gameContainer').style.display = 'block';
                
                startGameLoops();
                updateUI();
                updateInventory('armor');
                
                showNotification("–ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!");
                addLog("‚ö° –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è", "info");
                
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:", error);
                showNotification("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!");
            }
        }

        function startGameLoops() {
            if (gameInterval) clearInterval(gameInterval);
            if (energyInterval) clearInterval(energyInterval);
            
            gameInterval = setInterval(() => {
                updateGameState();
            }, 1000);
            
            energyInterval = setInterval(() => {
                regenEnergy();
            }, 30000);
        }

        function updateGameState() {
            gameState.gameTime = gameState.gameTime || 0;
            gameState.gameTime++;
            
            updateBuffs();
            updateChristmasEvent();
            updateUI();
        }

        function regenEnergy() {
            if (gameState.energy < gameState.maxEnergy) {
                const regenAmount = Math.floor(gameState.maxEnergy * 0.1);
                gameState.energy = Math.min(gameState.maxEnergy, gameState.energy + regenAmount);
                gameState.energyRegenTime = Date.now();
                
                if (regenAmount > 0) {
                    addLog(`‚ö° –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${regenAmount} —ç–Ω–µ—Ä–≥–∏–∏`, "info");
                }
            }
        }

        function updateBuffs() {
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –±–∞—Ñ—Ñ–æ–≤
        }

        function updatePlayerProfile() {
            document.getElementById('playerName').textContent = gameState.dragonName;
            document.getElementById('playerLevel').textContent = gameState.level;
            document.getElementById('playerAvatar').textContent = "üêâ";
        }

        function updateUI() {
            document.getElementById('gold').textContent = gameState.gold.toLocaleString();
            document.getElementById('essence').textContent = gameState.essence.toLocaleString();
            document.getElementById('crystals').textContent = gameState.crystals.toLocaleString();
            document.getElementById('energy').textContent = `${gameState.energy}/${gameState.maxEnergy}`;
            document.getElementById('xp').textContent = `${gameState.xp}/${gameState.xpToNextLevel}`;
            
            document.getElementById('dragonName').textContent = gameState.dragonName;
            document.getElementById('playerName').textContent = gameState.dragonName;
            document.getElementById('dragonLevel').textContent = gameState.level;
            document.getElementById('playerLevel').textContent = gameState.level;
            
            document.getElementById('statAttack').textContent = gameState.baseStats.attack;
            document.getElementById('statDefense').textContent = gameState.baseStats.defense;
            document.getElementById('statHealth').textContent = `${gameState.baseStats.health}/${gameState.baseStats.maxHealth}`;
            document.getElementById('statSpeed').textContent = gameState.baseStats.speed;
            document.getElementById('statCrit').textContent = `${gameState.baseStats.critical}%`;
            document.getElementById('statDodge').textContent = `${gameState.baseStats.dodge}%`;
            
            document.getElementById('huntBtn').disabled = gameState.energy < 10;
        }

        function checkLevelUp() {
            while (gameState.xp >= gameState.xpToNextLevel) {
                gameState.xp -= gameState.xpToNextLevel;
                gameState.level++;
                
                gameState.xpToNextLevel = Math.floor(gameState.xpToNextLevel * 1.5);
                gameState.baseStats.attack += 10;
                gameState.baseStats.defense += 5;
                gameState.baseStats.maxHealth += 50;
                gameState.baseStats.health = gameState.baseStats.maxHealth;
                gameState.baseStats.speed += 5;
                gameState.baseStats.critical += 1;
                gameState.baseStats.dodge += 0.5;
                
                gameState.maxEnergy += 5;
                gameState.energy = gameState.maxEnergy;
                
                showLevelUpNotification();
            }
            
            updateUI();
        }

        function showLevelUpNotification() {
            showNotification(`üéâ –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω! –¢–µ–ø–µ—Ä—å –≤—ã —É—Ä–æ–≤–µ–Ω—å ${gameState.level}!`, 3000);
            addLog(`üåü –î–æ—Å—Ç–∏–≥–Ω—É—Ç —É—Ä–æ–≤–µ–Ω—å ${gameState.level}! –ü–æ–ª—É—á–µ–Ω—ã –±–æ–Ω—É—Å—ã –∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º.`, "loot");
        }

        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }

        function addLog(message, type = "info") {
            const log = document.getElementById('battleLog');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = message;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function showModal(content) {
            const overlay = document.getElementById('modalOverlay');
            overlay.innerHTML = content;
            overlay.style.display = 'flex';
        }

        function closeModal() {
            const overlay = document.getElementById('modalOverlay');
            overlay.style.display = 'none';
        }

        // ==================== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function showMultiplayerBattle() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">‚öîÔ∏è PvP –ê—Ä–µ–Ω–∞</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">‚öîÔ∏è</div>
                        <div style="font-size: 24px; color: var(--color-primary); margin-bottom: 10px;">
                            –í–∞—à —Ä–µ–π—Ç–∏–Ω–≥: ${gameState.multiplayer.rating}
                        </div>
                        <div style="color: var(--color-text-secondary);">
                            –†–∞–Ω–≥: <span style="color: var(--color-christmas-gold); font-weight: bold;">${gameState.multiplayer.rank}</span>
                        </div>
                    </div>
                    
                    <button onclick="findQuickMatch()" 
                            style="width: 100%; padding: 15px; background: linear-gradient(45deg, var(--color-primary), var(--color-secondary)); border: none; border-radius: 10px; color: white; font-size: 18px; font-weight: bold; cursor: pointer; margin-bottom: 20px;">
                        –ù–∞–π—Ç–∏ –±—ã—Å—Ç—Ä—ã–π –±–æ–π
                    </button>
                    
                    <button onclick="showTournament()" 
                            style="width: 100%; padding: 15px; background: linear-gradient(45deg, var(--color-christmas-red), var(--color-christmas-green)); border: none; border-radius: 10px; color: white; font-size: 18px; font-weight: bold; cursor: pointer;">
                        –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Ç—É—Ä–Ω–∏—Ä
                    </button>
                </div>
            `;
            
            showModal(modalContent);
        }

        function findQuickMatch() {
            if (gameState.energy < 30) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è PvP –±–æ—è!");
                return;
            }
            
            const opponents = mockServer.onlinePlayers.filter(p => 
                p.id !== gameState.playerId && 
                Math.abs(p.rating - gameState.multiplayer.rating) < 500
            );
            
            if (opponents.length === 0) {
                const botRating = gameState.multiplayer.rating + (Math.random() * 1000 - 500);
                const bot = {
                    id: 'bot_match',
                    name: "–°–æ–ø–µ—Ä–Ω–∏–∫",
                    level: gameState.level + Math.floor(Math.random() * 5) - 2,
                    rating: Math.max(100, Math.floor(botRating)),
                    avatar: "ü§ñ"
                };
                
                startPvPBattle(bot);
            } else {
                const opponent = opponents[Math.floor(Math.random() * opponents.length)];
                startPvPBattle(opponent);
            }
            
            closeModal();
        }

        function showTournament() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üèÜ –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Ç—É—Ä–Ω–∏—Ä</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üéÑ</div>
                        <div style="font-size: 24px; color: var(--color-christmas-gold); margin-bottom: 10px;">
                            –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 50,000 –∑–æ–ª–æ—Ç–∞
                        </div>
                    </div>
                    
                    <button onclick="joinTournament()" 
                            style="width: 100%; padding: 15px; background: linear-gradient(45deg, var(--color-christmas-red), var(--color-christmas-green)); border: none; border-radius: 10px; color: white; font-size: 18px; font-weight: bold; cursor: pointer;">
                        –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å (1000 –∑–æ–ª–æ—Ç–∞)
                    </button>
                </div>
            `;
            
            showModal(modalContent);
        }

        function joinTournament() {
            if (gameState.gold < 1000) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞ –¥–ª—è —É—á–∞—Å—Ç–∏—è!");
                return;
            }
            
            gameState.gold -= 1000;
            showNotification("–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ç—É—Ä–Ω–∏—Ä–µ! –£–¥–∞—á–∏!", 3000);
            closeModal();
            updateUI();
        }

        function showChests() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üéÅ –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Å—É–Ω–¥—É–∫–∏</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="margin: 20px 0; color: var(--color-text-secondary); text-align: center;">
                        –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ —Å—É–Ω–¥—É–∫–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏!
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0;">
                        <div class="chest chest-epic" onclick="openChristmasChest('chest_christmas')">
                            <div class="chest-icon">üéÑ</div>
                            <div class="chest-name">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å—É–Ω–¥—É–∫</div>
                            <div class="chest-cost">500 –∑–æ–ª–æ—Ç–∞</div>
                        </div>
                        
                        <div class="chest chest-legendary" onclick="openChristmasChest('chest_santa')">
                            <div class="chest-icon">üéÖ</div>
                            <div class="chest-name">–°—É–Ω–¥—É–∫ –°–∞–Ω—Ç—ã</div>
                            <div class="chest-cost">1000 –∑–æ–ª–æ—Ç–∞</div>
                        </div>
                        
                        <div class="chest chest-rare" onclick="openChristmasChest('chest_snow')">
                            <div class="chest-icon">‚ùÑÔ∏è</div>
                            <div class="chest-name">–°–Ω–µ–∂–Ω—ã–π —Å—É–Ω–¥—É–∫</div>
                            <div class="chest-cost">300 –∑–æ–ª–æ—Ç–∞</div>
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function openChristmasChest(chestId) {
            const chests = {
                "chest_christmas": { cost: 500, rarity: "epic" },
                "chest_santa": { cost: 1000, rarity: "legendary" },
                "chest_snow": { cost: 300, rarity: "rare" }
            };
            
            const chest = chests[chestId];
            if (!chest) return;
            
            if (gameState.gold < chest.cost) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞!");
                closeModal();
                return;
            }
            
            gameState.gold -= chest.cost;
            gameState.christmasEvent.openedChristmasChests = (gameState.christmasEvent.openedChristmasChests || 0) + 1;
            
            const rewards = generateChristmasChestRewards(chest.rarity);
            showChristmasChestRewards(chestId, rewards);
            
            updateUI();
        }

        function generateChristmasChestRewards(rarity) {
            const rewards = {
                gold: 0,
                crystals: 0,
                items: []
            };
            
            if (rarity === "rare") rewards.gold = Math.floor(Math.random() * 200) + 100;
            else if (rarity === "epic") rewards.gold = Math.floor(Math.random() * 300) + 200;
            else if (rarity === "legendary") rewards.gold = Math.floor(Math.random() * 500) + 500;
            
            if (rarity === "rare") rewards.crystals = Math.floor(Math.random() * 2) + 1;
            else if (rarity === "epic") rewards.crystals = Math.floor(Math.random() * 3) + 1;
            else if (rarity === "legendary") rewards.crystals = Math.floor(Math.random() * 6) + 3;
            
            const itemChance = rarity === "legendary" ? 0.8 : rarity === "epic" ? 0.6 : 0.4;
            if (Math.random() < itemChance) {
                const filteredItems = CHRISTMAS_ITEMS.filter(item => {
                    if (rarity === "legendary") return item.rarity === "legendary" || item.rarity === "mythical";
                    if (rarity === "epic") return item.rarity === "epic" || item.rarity === "legendary";
                    return item.rarity === "rare" || item.rarity === "uncommon";
                });
                
                if (filteredItems.length > 0) {
                    const item = filteredItems[Math.floor(Math.random() * filteredItems.length)];
                    rewards.items.push(item);
                }
            }
            
            return rewards;
        }

        function showChristmasChestRewards(chestId, rewards) {
            let itemsHTML = "";
            
            rewards.items.forEach(item => {
                itemsHTML += `
                    <div style="display: flex; align-items: center; gap: 10px; margin: 5px 0; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <div style="font-size: 24px;">${item.icon}</div>
                        <div>
                            <div style="color: ${getRarityColor(item.rarity)}; font-weight: bold;">${item.name}</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">${getRarityName(item.rarity)}</div>
                        </div>
                    </div>
                `;
            });
            
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üéÅ –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å—É–Ω–¥—É–∫ –æ—Ç–∫—Ä—ã—Ç!</div>
                        <button class="close-modal" onclick="applyChestRewards('${chestId}', ${JSON.stringify(rewards).replace(/'/g, "\\'")})">√ó</button>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 60px;">üéÑ</div>
                        <div style="color: var(--color-christmas-green); font-size: 24px; margin: 10px 0;">–° –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!</div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="color: var(--color-primary); margin-bottom: 15px; font-size: 18px;">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã:</div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;">
                            ${rewards.gold > 0 ? `
                                <div style="text-align: center; padding: 15px; background: rgba(255, 215, 0, 0.1); border-radius: 10px; border: 1px solid rgba(255, 215, 0, 0.3);">
                                    <div style="font-size: 24px;">üí∞</div>
                                    <div style="font-weight: bold; color: #ffd700;">${rewards.gold}</div>
                                    <div style="font-size: 12px; color: var(--color-text-secondary);">–∑–æ–ª–æ—Ç–∞</div>
                                </div>
                            ` : ''}
                            
                            ${rewards.crystals > 0 ? `
                                <div style="text-align: center; padding: 15px; background: rgba(52, 152, 219, 0.1); border-radius: 10px; border: 1px solid rgba(52, 152, 219, 0.3);">
                                    <div style="font-size: 24px;">üîÆ</div>
                                    <div style="font-weight: bold; color: #3498db;">${rewards.crystals}</div>
                                    <div style="font-size: 12px; color: var(--color-text-secondary);">–∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤</div>
                                </div>
                            ` : ''}
                        </div>
                        
                        ${rewards.items.length > 0 ? `
                            <div style="color: var(--color-primary); margin: 20px 0 10px 0;">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã:</div>
                            ${itemsHTML}
                        ` : ''}
                    </div>
                    
                    <button onclick="applyChestRewards('${chestId}', ${JSON.stringify(rewards).replace(/'/g, "\\'")})" 
                            style="width: 100%; padding: 15px; background: linear-gradient(45deg, var(--color-christmas-red), var(--color-christmas-green)); border: none; border-radius: 10px; color: white; font-size: 18px; font-weight: bold; cursor: pointer;">
                        –ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã
                    </button>
                </div>
            `;
            
            showModal(modalContent);
        }

        function applyChestRewards(chestId, rewards) {
            gameState.gold += rewards.gold;
            if (rewards.crystals) gameState.crystals += rewards.crystals;
            
            rewards.items.forEach(item => {
                addItemToInventory(item);
                if (!gameState.christmasEvent.collectedItems.includes(item.id)) {
                    gameState.christmasEvent.collectedItems.push(item.id);
                }
            });
            
            let rewardText = `–ü–æ–ª—É—á–µ–Ω—ã –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã:`;
            if (rewards.gold > 0) rewardText += ` ${rewards.gold} –∑–æ–ª–æ—Ç–∞`;
            if (rewards.crystals > 0) rewardText += `, ${rewards.crystals} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤`;
            if (rewards.items.length > 0) rewardText += `, ${rewards.items.length} –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç(–æ–≤)`;
            
            showNotification(rewardText, 4000);
            addLog(`üéÅ –û—Ç–∫—Ä—ã—Ç –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å—É–Ω–¥—É–∫! ${rewardText}`, "loot");
            
            closeModal();
            updateUI();
        }

        // ==================== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–û–î–ê–õ–¨–ö–ò ====================
        function showArena() {
            showMultiplayerBattle();
        }

        function showGuild() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üè∞ –ì–∏–ª—å–¥–∏–∏</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üè∞</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">–í—ã –Ω–µ —Å–æ—Å—Ç–æ–∏—Ç–µ –≤ –≥–∏–ª—å–¥–∏–∏</div>
                        <div style="color: var(--color-text-secondary); margin-bottom: 30px;">
                            –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –≥–∏–ª—å–¥–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω—ã—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π!
                        </div>
                        
                        <button onclick="createGuild()" 
                                style="padding: 12px 24px; background: linear-gradient(45deg, var(--color-primary), var(--color-secondary)); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer;">
                            –°–æ–∑–¥–∞—Ç—å –≥–∏–ª—å–¥–∏—é (5000 –∑–æ–ª–æ—Ç–∞)
                        </button>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function createGuild() {
            if (gameState.gold < 5000) {
                showNotification("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–æ–ª–æ—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–ª—å–¥–∏–∏!");
                return;
            }
            
            const guildName = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏ (3-20 —Å–∏–º–≤–æ–ª–æ–≤):");
            if (!guildName || guildName.length < 3 || guildName.length > 20) {
                showNotification("–ù–∞–∑–≤–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 3 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤!");
                return;
            }
            
            gameState.gold -= 5000;
            gameState.multiplayer.guild = guildName;
            
            showNotification(`–ì–∏–ª—å–¥–∏—è "${guildName}" —Å–æ–∑–¥–∞–Ω–∞!`, 3000);
            closeModal();
            updateUI();
        }

        function showTrading() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üîÑ –¢–æ—Ä–≥–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üîÑ</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">–û–±–º–µ–Ω –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏</div>
                        <div style="color: var(--color-text-secondary);">
                            –¢–æ—Ä–≥—É–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏ –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω—É–∂–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã!
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function showDungeon() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">‚ùÑÔ∏è –õ–µ–¥—è–Ω–æ–µ –ø–æ–¥–∑–µ–º–µ–ª—å–µ</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">‚ùÑÔ∏è</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∏–≤–µ–Ω—Ç</div>
                        <div style="color: var(--color-text-secondary);">
                            –ò—Å—Å–ª–µ–¥—É–π—Ç–µ –ª–µ–¥—è–Ω–æ–µ –ø–æ–¥–∑–µ–º–µ–ª—å–µ –≤ –ø–æ–∏—Å–∫–∞—Ö –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö —Å–æ–∫—Ä–æ–≤–∏—â!
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function showDailyQuest() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üìÖ</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</div>
                        <div style="color: var(--color-text-secondary);">
                            –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤!
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function showAchievements() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üèÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üèÖ</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</div>
                        <div style="color: var(--color-text-secondary);">
                            –ü–æ–ª—É—á–∞–π—Ç–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è!
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function showCollection() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">üìö –ö–æ–ª–ª–µ–∫—Ü–∏—è</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">üìö</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">–ö–æ–ª–ª–µ–∫—Ü–∏—è –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤</div>
                        <div style="color: var(--color-text-secondary);">
                            –°–æ–±–µ—Ä–∏—Ç–µ –≤—Å–µ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Å–æ–±—ã—Ö –Ω–∞–≥—Ä–∞–¥!
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        function showSettings() {
            const modalContent = `
                <div class="modal">
                    <div class="modal-header">
                        <div class="modal-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                        <button class="close-modal" onclick="closeModal()">√ó</button>
                    </div>
                    
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 60px; margin-bottom: 20px;">‚öôÔ∏è</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</div>
                        <div style="color: var(--color-text-secondary);">
                            –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–≥—Ä—É –ø–æ–¥ —Å–µ–±—è
                        </div>
                    </div>
                </div>
            `;
            
            showModal(modalContent);
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        window.onload = simulateLoading;
        
        window.startGame = startGame;
        window.loadGame = loadGame;
        window.connectMultiplayer = connectMultiplayer;
        window.showSettings = showSettings;
        window.showLeaderboard = showLeaderboard;
        window.startHunt = startHunt;
        window.showChests = showChests;
        window.showMultiplayerBattle = showMultiplayerBattle;
        window.showArena = showArena;
        window.showGuild = showGuild;
        window.showTrading = showTrading;
        window.showDungeon = showDungeon;
        window.showDailyQuest = showDailyQuest;
        window.showAchievements = showAchievements;
        window.showCollection = showCollection;
        window.switchInventoryTab = switchInventoryTab;
        window.closeModal = closeModal;
        window.showAdminPanel = showAdminPanel;
        window.checkAdminPassword = checkAdminPassword;
        window.adminAddItem = adminAddItem;
        window.adminApply = adminApply;
        window.adminReset = adminReset;
        window.adminClose = adminClose;
        window.refreshOnlinePlayers = refreshOnlinePlayers;
        window.challengePlayer = challengePlayer;
        window.completeChristmasQuest = completeChristmasQuest;
        window.openChristmasChest = openChristmasChest;
        window.applyChestRewards = applyChestRewards;
        window.showItemDetails = showItemDetails;
        window.useItem = useItem;
        window.sellItem = sellItem;
        window.findQuickMatch = findQuickMatch;
        window.showTournament = showTournament;
        window.joinTournament = joinTournament;
        window.createGuild = createGuild;
    </script>
</body>
</html>